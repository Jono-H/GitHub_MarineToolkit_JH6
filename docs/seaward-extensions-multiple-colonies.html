<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Seaward Extensions: Multiple colonies | Marine Megafauna Conservation Toolkit: with a huge seabird bias</title>
  <meta name="description" content="4 Seaward Extensions: Multiple colonies | Marine Megafauna Conservation Toolkit: with a huge seabird bias" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Seaward Extensions: Multiple colonies | Marine Megafauna Conservation Toolkit: with a huge seabird bias" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Seaward Extensions: Multiple colonies | Marine Megafauna Conservation Toolkit: with a huge seabird bias" />
  
  
  

<meta name="author" content="BirdLife International Partnership" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="seaward-extensions-single-colony.html"/>
<link rel="next" href="tracking-data-introduction.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="toolkit-introductory-chapters.html"><a href="toolkit-introductory-chapters.html"><i class="fa fa-check"></i><b>1</b> Toolkit: Introductory chapters</a></li>
<li class="chapter" data-level="2" data-path="seaward-extension-introduction.html"><a href="seaward-extension-introduction.html"><i class="fa fa-check"></i><b>2</b> Seaward Extension Introduction</a></li>
<li class="chapter" data-level="3" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html"><i class="fa fa-check"></i><b>3</b> Seaward Extensions: Single colony</a>
<ul>
<li class="chapter" data-level="3.1" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#summary"><i class="fa fa-check"></i><b>3.1</b> <strong>Summary</strong></a></li>
<li class="chapter" data-level="3.2" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#load-required-r-packages"><i class="fa fa-check"></i><b>3.2</b> <strong>Load required R packages:</strong></a></li>
<li class="chapter" data-level="3.3" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#supply-input-data"><i class="fa fa-check"></i><b>3.3</b> <strong>Supply input data</strong></a></li>
<li class="chapter" data-level="3.4" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#format-colony-location-as-spatial-objects"><i class="fa fa-check"></i><b>3.4</b> <strong>Format colony location as spatial objects</strong></a></li>
<li class="chapter" data-level="3.5" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#create-a-background-raster"><i class="fa fa-check"></i><b>3.5</b> <strong>Create a background raster</strong></a></li>
<li class="chapter" data-level="3.6" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#calculate-distance-by-sea-from-the-colony-per-cell"><i class="fa fa-check"></i><b>3.6</b> <strong>Calculate distance by sea from the colony per cell</strong></a></li>
<li class="chapter" data-level="3.7" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#calculate-estimate-number-of-birds-from-the-colony-using-each-cell"><i class="fa fa-check"></i><b>3.7</b> <strong>Calculate estimate number of birds from the colony using each cell</strong></a></li>
<li class="chapter" data-level="3.8" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#save-raster-output"><i class="fa fa-check"></i><b>3.8</b> <strong>Save raster output</strong></a></li>
<li class="chapter" data-level="3.9" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#calculate-iba-raster"><i class="fa fa-check"></i><b>3.9</b> <strong>Calculate IBA raster</strong></a></li>
<li class="chapter" data-level="3.10" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#calculate-iba-polygon"><i class="fa fa-check"></i><b>3.10</b> <strong>Calculate IBA polygon</strong></a></li>
<li class="chapter" data-level="3.11" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#plot-and-save-the-final-iba-polygon"><i class="fa fa-check"></i><b>3.11</b> Plot and save the final IBA polygon</a></li>
<li class="chapter" data-level="3.12" data-path="seaward-extensions-single-colony.html"><a href="seaward-extensions-single-colony.html#record-the-metadata"><i class="fa fa-check"></i><b>3.12</b> Record the metadata</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html"><i class="fa fa-check"></i><b>4</b> Seaward Extensions: Multiple colonies</a>
<ul>
<li class="chapter" data-level="4.1" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#load-required-r-packages-1"><i class="fa fa-check"></i><b>4.1</b> <strong>Load required R packages:</strong></a></li>
<li class="chapter" data-level="4.2" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#supply-input-data-1"><i class="fa fa-check"></i><b>4.2</b> <strong>Supply input data</strong></a></li>
<li class="chapter" data-level="4.3" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#format-colony-locations-as-spatial-objects"><i class="fa fa-check"></i><b>4.3</b> <strong>Format colony locations as spatial objects</strong></a></li>
<li class="chapter" data-level="4.4" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#create-a-background-raster-1"><i class="fa fa-check"></i><b>4.4</b> <strong>Create a background raster</strong></a></li>
<li class="chapter" data-level="4.5" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#calculate-distance-by-sea-from-the-colony-per-cell-1"><i class="fa fa-check"></i><b>4.5</b> <strong>Calculate distance by sea from the colony per cell</strong></a></li>
<li class="chapter" data-level="4.6" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#inspect-the-output-distance-from-colony-rasters"><i class="fa fa-check"></i><b>4.6</b> <strong>Inspect the output distance from colony rasters</strong></a></li>
<li class="chapter" data-level="4.7" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#for-each-colony-estimate-number-of-birds-that-use-each-cell"><i class="fa fa-check"></i><b>4.7</b> <strong>For each colony, estimate number of birds that use each cell</strong></a></li>
<li class="chapter" data-level="4.8" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#overlap-the-rasters-and-save-raster-outputs"><i class="fa fa-check"></i><b>4.8</b> <strong>Overlap the rasters and save raster outputs</strong></a></li>
<li class="chapter" data-level="4.9" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#calculate-iba-raster-1"><i class="fa fa-check"></i><b>4.9</b> <strong>Calculate IBA raster</strong></a></li>
<li class="chapter" data-level="4.10" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#calculate-iba-polygon-1"><i class="fa fa-check"></i><b>4.10</b> <strong>Calculate IBA polygon</strong></a></li>
<li class="chapter" data-level="4.11" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#split-into-separate-iba-polygons-and-save-metadata"><i class="fa fa-check"></i><b>4.11</b> <strong>Split into separate IBA polygons and save metadata</strong></a></li>
<li class="chapter" data-level="4.12" data-path="seaward-extensions-multiple-colonies.html"><a href="seaward-extensions-multiple-colonies.html#record-the-metadata-1"><i class="fa fa-check"></i><b>4.12</b> Record the metadata</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tracking-data-introduction.html"><a href="tracking-data-introduction.html"><i class="fa fa-check"></i><b>5</b> Tracking data: Introduction</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tracking-data-introduction.html"><a href="tracking-data-introduction.html#introduction-to-animal-tracking-data-considered-in-this-toolkit"><i class="fa fa-check"></i><b>5.1</b> Introduction to animal tracking data considered in this toolkit</a></li>
<li class="chapter" data-level="5.2" data-path="tracking-data-introduction.html"><a href="tracking-data-introduction.html#lay-introduction-to-gps-ptt-gls-devices"><i class="fa fa-check"></i><b>5.2</b> Lay introduction to GPS, PTT, GLS devices</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tracking-data-sampling-strategy.html"><a href="tracking-data-sampling-strategy.html"><i class="fa fa-check"></i><b>6</b> Tracking data: Sampling strategy</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tracking-data-sampling-strategy.html"><a href="tracking-data-sampling-strategy.html#sampling-strategy-when-collecting-animal-tracking-data-for-seabirds"><i class="fa fa-check"></i><b>6.1</b> Sampling strategy when collecting animal tracking data for seabirds</a></li>
<li class="chapter" data-level="6.2" data-path="tracking-data-sampling-strategy.html"><a href="tracking-data-sampling-strategy.html#how-many-birds-should-you-track"><i class="fa fa-check"></i><b>6.2</b> How many birds should you track?</a></li>
<li class="chapter" data-level="6.3" data-path="tracking-data-sampling-strategy.html"><a href="tracking-data-sampling-strategy.html#how-many-years-of-tracking-data-should-you-collect"><i class="fa fa-check"></i><b>6.3</b> How many years of tracking data should you collect?</a></li>
<li class="chapter" data-level="6.4" data-path="tracking-data-sampling-strategy.html"><a href="tracking-data-sampling-strategy.html#how-many-years-of-tracking-data-should-you-collect-for-iba-or-kba-identification"><i class="fa fa-check"></i><b>6.4</b> How many years of tracking data should you collect for IBA or KBA identification?</a></li>
<li class="chapter" data-level="6.5" data-path="tracking-data-sampling-strategy.html"><a href="tracking-data-sampling-strategy.html#which-locations-should-you-track-animals-from"><i class="fa fa-check"></i><b>6.5</b> Which locations should you track animals from?</a></li>
<li class="chapter" data-level="6.6" data-path="tracking-data-sampling-strategy.html"><a href="tracking-data-sampling-strategy.html#sampling-strategy-general-recommendations"><i class="fa fa-check"></i><b>6.6</b> Sampling strategy general recommendations</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tracking-data-defining-the-datagroup.html"><a href="tracking-data-defining-the-datagroup.html"><i class="fa fa-check"></i><b>7</b> Tracking data: Defining the dataGroup</a></li>
<li class="chapter" data-level="8" data-path="tracking-data-example-data-explained.html"><a href="tracking-data-example-data-explained.html"><i class="fa fa-check"></i><b>8</b> Tracking data: Example data explained</a></li>
<li class="chapter" data-level="9" data-path="tracking-data-storing-data-from-the-field.html"><a href="tracking-data-storing-data-from-the-field.html"><i class="fa fa-check"></i><b>9</b> Tracking data: Storing data from the field</a></li>
<li class="chapter" data-level="10" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html"><i class="fa fa-check"></i><b>10</b> Tracking data: Merge files together for analysis</a>
<ul>
<li class="chapter" data-level="10.1" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#what-this-chapter-covers"><i class="fa fa-check"></i><b>10.1</b> What this chapter covers:</a></li>
<li class="chapter" data-level="10.2" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#where-you-can-get-example-data-for-the-chapter"><i class="fa fa-check"></i><b>10.2</b> Where you can get example data for the chapter:</a></li>
<li class="chapter" data-level="10.3" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#load-packages"><i class="fa fa-check"></i><b>10.3</b> Load packages</a></li>
<li class="chapter" data-level="10.4" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#define-object-names-for-chapter"><i class="fa fa-check"></i><b>10.4</b> Define object names for chapter</a></li>
<li class="chapter" data-level="10.5" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#storing-reading-and-formatting-raw-tracking-data"><i class="fa fa-check"></i><b>10.5</b> Storing, reading, and formatting raw tracking data</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#storing-raw-tracking-data"><i class="fa fa-check"></i><b>10.5.1</b> Storing raw tracking data</a></li>
<li class="chapter" data-level="10.5.2" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#reading-raw-tracking-data-into-r-rstudio"><i class="fa fa-check"></i><b>10.5.2</b> Reading raw tracking data into R / Rstudio</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#example-data-summary-yelkouan-shearwaters-puffinus-yelkouan-croatia"><i class="fa fa-check"></i><b>10.6</b> Example data summary: Yelkouan Shearwaters (<em>Puffinus yelkouan</em>), Croatia</a></li>
<li class="chapter" data-level="10.7" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#loading-example-data-yelkouan-shearwaters-puffinus-yelkouan"><i class="fa fa-check"></i><b>10.7</b> Loading example data: Yelkouan Shearwaters (<em>Puffinus yelkouan</em>)</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#load-example-data-first-exploring-the-data-on-your-machine"><i class="fa fa-check"></i><b>10.7.1</b> Load example data: First, exploring the data on your machine</a></li>
<li class="chapter" data-level="10.7.2" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#load-example-data-second-prepare-the-files-for-loading-into-r"><i class="fa fa-check"></i><b>10.7.2</b> Load example data: Second, prepare the files for loading into R</a></li>
<li class="chapter" data-level="10.7.3" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#load-example-data-third-load-the-files-into-a-single-data-frame-in-r"><i class="fa fa-check"></i><b>10.7.3</b> Load example data: Third, load the files into a single data frame in R</a></li>
<li class="chapter" data-level="10.7.4" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#review-the-data-you-have-read-into-r"><i class="fa fa-check"></i><b>10.7.4</b> Review the data you have read into R</a></li>
<li class="chapter" data-level="10.7.5" data-path="tracking-data-merge-files-together-for-analysis.html"><a href="tracking-data-merge-files-together-for-analysis.html#save-the-merged-data"><i class="fa fa-check"></i><b>10.7.5</b> Save the merged data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><i class="fa fa-check"></i><b>11</b> Tracking data: Convert files into format of Seabird Tracking Database</a>
<ul>
<li class="chapter" data-level="11.1" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#what-this-chapter-covers-1"><i class="fa fa-check"></i><b>11.1</b> What this chapter covers:</a></li>
<li class="chapter" data-level="11.2" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#where-you-can-get-example-data-for-the-chapter-1"><i class="fa fa-check"></i><b>11.2</b> Where you can get example data for the chapter:</a></li>
<li class="chapter" data-level="11.3" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#load-packages-1"><i class="fa fa-check"></i><b>11.3</b> Load packages</a></li>
<li class="chapter" data-level="11.4" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#define-object-names-for-chapter-1"><i class="fa fa-check"></i><b>11.4</b> Define object names for chapter</a></li>
<li class="chapter" data-level="11.5" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#load-file-created-from-previous-chapter"><i class="fa fa-check"></i><b>11.5</b> Load file created from previous chapter</a></li>
<li class="chapter" data-level="11.6" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#seabird-tracking-database-format"><i class="fa fa-check"></i><b>11.6</b> Seabird Tracking Database format</a></li>
<li class="chapter" data-level="11.7" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#loading-the-dataset-template-from-seabird-tracking-database"><i class="fa fa-check"></i><b>11.7</b> Loading the dataset template from Seabird Tracking Database</a></li>
<li class="chapter" data-level="11.8" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#input-format-seabird-tracking-database"><i class="fa fa-check"></i><b>11.8</b> INPUT format: Seabird Tracking Database</a>
<ul>
<li class="chapter" data-level="11.8.1" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#formatting-own-data-to-align-with-seabird-tracking-database-input-format"><i class="fa fa-check"></i><b>11.8.1</b> Formatting own data to align with Seabird Tracking Database INPUT format</a></li>
<li class="chapter" data-level="11.8.2" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#input-stdb-format-saving"><i class="fa fa-check"></i><b>11.8.2</b> INPUT STDB format: saving</a></li>
</ul></li>
<li class="chapter" data-level="11.9" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#output-format-seabird-tracking-database"><i class="fa fa-check"></i><b>11.9</b> OUTPUT format: Seabird Tracking Database</a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#load-stdb-output-template"><i class="fa fa-check"></i><b>11.9.1</b> Load STDB output template</a></li>
<li class="chapter" data-level="11.9.2" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#convert-data-to-stdb-output-template"><i class="fa fa-check"></i><b>11.9.2</b> Convert data to STDB output template</a></li>
<li class="chapter" data-level="11.9.3" data-path="tracking-data-convert-files-into-format-of-seabird-tracking-database.html"><a href="tracking-data-convert-files-into-format-of-seabird-tracking-database.html#output-stdb-format-saving"><i class="fa fa-check"></i><b>11.9.3</b> OUTPUT STDB format: saving</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><i class="fa fa-check"></i><b>12</b> Tracking data: Plotting tracks and reviewing tabular data</a>
<ul>
<li class="chapter" data-level="12.1" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#what-this-chapter-covers-2"><i class="fa fa-check"></i><b>12.1</b> What this chapter covers:</a></li>
<li class="chapter" data-level="12.2" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#where-you-can-get-example-data-for-the-chapter-2"><i class="fa fa-check"></i><b>12.2</b> Where you can get example data for the chapter:</a></li>
<li class="chapter" data-level="12.3" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#load-packages-2"><i class="fa fa-check"></i><b>12.3</b> Load packages</a></li>
<li class="chapter" data-level="12.4" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#define-object-names-for-chapter-2"><i class="fa fa-check"></i><b>12.4</b> Define object names for chapter</a></li>
<li class="chapter" data-level="12.5" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#load-file-or-file-created-from-previous-chapter"><i class="fa fa-check"></i><b>12.5</b> Load file (or file created from previous chapter)</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#simplify-object-names-if-need-be"><i class="fa fa-check"></i><b>12.5.1</b> Simplify object names if need be</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#explore-the-tabular-data"><i class="fa fa-check"></i><b>12.6</b> Explore the tabular data</a></li>
<li class="chapter" data-level="12.7" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#review-of-summary-output"><i class="fa fa-check"></i><b>12.7</b> Review of summary output</a></li>
<li class="chapter" data-level="12.8" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#arrange-data-and-remove-duplicate-entries"><i class="fa fa-check"></i><b>12.8</b> Arrange data and remove duplicate entries</a></li>
<li class="chapter" data-level="12.9" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#visualise-all-the-location-data"><i class="fa fa-check"></i><b>12.9</b> Visualise all the location data</a></li>
<li class="chapter" data-level="12.10" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#review-of-overall-plot-for-all-data-points"><i class="fa fa-check"></i><b>12.10</b> Review of overall plot for all data points</a></li>
<li class="chapter" data-level="12.11" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#save-all-the-location-data-as-a-shapefile"><i class="fa fa-check"></i><b>12.11</b> Save all the location data as a shapefile</a></li>
<li class="chapter" data-level="12.12" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#save-all-the-location-data-as-a-plot"><i class="fa fa-check"></i><b>12.12</b> Save all the location data as a plot</a></li>
<li class="chapter" data-level="12.13" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#visualise-individual-animal-tracks"><i class="fa fa-check"></i><b>12.13</b> Visualise individual animal tracks</a>
<ul>
<li class="chapter" data-level="12.13.1" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#denote-beginning-and-end-of-tracks-for-individual-animals-entire-track"><i class="fa fa-check"></i><b>12.13.1</b> Denote beginning and end of tracks for individual animals entire track</a></li>
<li class="chapter" data-level="12.13.2" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#save-individual-tracks-as-static-plots"><i class="fa fa-check"></i><b>12.13.2</b> Save individual tracks as static plots</a></li>
<li class="chapter" data-level="12.13.3" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#save-individual-tracks-as-shapefiles"><i class="fa fa-check"></i><b>12.13.3</b> Save individual tracks as shapefiles</a></li>
</ul></li>
<li class="chapter" data-level="12.14" data-path="tracking-data-plotting-tracks-and-reviewing-tabular-data.html"><a href="tracking-data-plotting-tracks-and-reviewing-tabular-data.html#when-to-remove-or-salvage-data-from-a-tracked-individuals"><i class="fa fa-check"></i><b>12.14</b> When to remove or salvage data from a tracked individual(s)</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tracking-data-cleaning-tracking-data.html"><a href="tracking-data-cleaning-tracking-data.html"><i class="fa fa-check"></i><b>13</b> Tracking data: Cleaning tracking data</a>
<ul>
<li class="chapter" data-level="13.1" data-path="tracking-data-cleaning-tracking-data.html"><a href="tracking-data-cleaning-tracking-data.html#what-this-chapter-covers-3"><i class="fa fa-check"></i><b>13.1</b> What this chapter covers:</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="track2kba-introduction.html"><a href="track2kba-introduction.html"><i class="fa fa-check"></i><b>14</b> Track2KBA: Introduction</a>
<ul>
<li class="chapter" data-level="14.1" data-path="track2kba-introduction.html"><a href="track2kba-introduction.html#what-this-chapter-covers-4"><i class="fa fa-check"></i><b>14.1</b> What this chapter covers:</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><i class="fa fa-check"></i><b>15</b> Track2KBA - Central Place Foragers: Clean and summarise data for analysis</a>
<ul>
<li class="chapter" data-level="15.1" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#what-this-chapter-covers-5"><i class="fa fa-check"></i><b>15.1</b> What this chapter covers:</a></li>
<li class="chapter" data-level="15.2" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#outputs-and-assumptions-of-data-within-this-chapter"><i class="fa fa-check"></i><b>15.2</b> Outputs and assumptions of data within this chapter:</a></li>
<li class="chapter" data-level="15.3" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#where-you-can-get-example-data-for-the-chapter-3"><i class="fa fa-check"></i><b>15.3</b> Where you can get example data for the chapter:</a></li>
<li class="chapter" data-level="15.4" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#load-packages-3"><i class="fa fa-check"></i><b>15.4</b> Load packages</a></li>
<li class="chapter" data-level="15.5" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#define-object-names-for-chapter-3"><i class="fa fa-check"></i><b>15.5</b> Define object names for chapter</a></li>
<li class="chapter" data-level="15.6" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#load-file-or-file-created-from-previous-chapter-1"><i class="fa fa-check"></i><b>15.6</b> Load file (or file created from previous chapter)</a></li>
<li class="chapter" data-level="15.7" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#datagroup-prepare-relevant-grouping-of-data-for-analyses"><i class="fa fa-check"></i><b>15.7</b> dataGroup: prepare relevant grouping of data for analyses</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#datagroup-defining-the-datagroup-for-the-tutorial"><i class="fa fa-check"></i><b>15.7.1</b> dataGroup: Defining the dataGroup for the tutorial</a></li>
<li class="chapter" data-level="15.7.2" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#datagroup-extracting-data-for-the-analyses"><i class="fa fa-check"></i><b>15.7.2</b> dataGroup: extracting data for the analyses</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#datagroup-inspection-visual-review"><i class="fa fa-check"></i><b>15.8</b> dataGroup inspection: visual review</a></li>
<li class="chapter" data-level="15.9" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#arrange-data-and-remove-duplicate-entries-1"><i class="fa fa-check"></i><b>15.9</b> Arrange data and remove duplicate entries</a></li>
<li class="chapter" data-level="15.10" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#speed-filter-gps-data-remove-erroneous-location-points"><i class="fa fa-check"></i><b>15.10</b> Speed filter GPS data: remove erroneous location points</a></li>
<li class="chapter" data-level="15.11" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#speed-filter-ptt-data-remove-erroneous-location-points"><i class="fa fa-check"></i><b>15.11</b> Speed filter PTT data: remove erroneous location points</a></li>
<li class="chapter" data-level="15.12" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#speed-filter-data-review-plotting"><i class="fa fa-check"></i><b>15.12</b> Speed filter data review: plotting</a></li>
<li class="chapter" data-level="15.13" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#data-cleaning-for-cpf-n_locs-sampling-interval-interpolation"><i class="fa fa-check"></i><b>15.13</b> Data cleaning for CPF: n_locs, sampling interval, interpolation</a>
<ul>
<li class="chapter" data-level="15.13.1" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#data-cleaning-for-cpf-seabirds-tracks-vs.-trips"><i class="fa fa-check"></i><b>15.13.1</b> Data cleaning for CPF seabirds: tracks vs. trips</a></li>
<li class="chapter" data-level="15.13.2" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#data-cleaning-for-cpf-seabirds-nesting-habitat-considerations"><i class="fa fa-check"></i><b>15.13.2</b> Data cleaning for CPF seabirds: Nesting habitat considerations</a></li>
</ul></li>
<li class="chapter" data-level="15.14" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kba-format-data-for-use"><i class="fa fa-check"></i><b>15.14</b> track2KBA: format data for use</a>
<ul>
<li class="chapter" data-level="15.14.1" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kbaformatfields"><i class="fa fa-check"></i><b>15.14.1</b> track2KBA::formatFields()</a></li>
</ul></li>
<li class="chapter" data-level="15.15" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kba-split-tracks-into-trips"><i class="fa fa-check"></i><b>15.15</b> track2KBA: Split tracks into trips</a>
<ul>
<li class="chapter" data-level="15.15.1" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#define-colony-of-origin"><i class="fa fa-check"></i><b>15.15.1</b> Define colony of origin</a></li>
<li class="chapter" data-level="15.15.2" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#colony-of-origin-review"><i class="fa fa-check"></i><b>15.15.2</b> Colony of origin review</a></li>
<li class="chapter" data-level="15.15.3" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#apply-tripsplit"><i class="fa fa-check"></i><b>15.15.3</b> Apply <code>tripSplit()</code></a></li>
<li class="chapter" data-level="15.15.4" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#review-of-tripsplit-output"><i class="fa fa-check"></i><b>15.15.4</b> Review of tripSplit() output</a></li>
<li class="chapter" data-level="15.15.5" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#understanding-what-is-happening-in-tripsplit-further"><i class="fa fa-check"></i><b>15.15.5</b> Understanding what is happening in tripSplit() further</a></li>
<li class="chapter" data-level="15.15.6" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#review-the-individual-trips-for-each-tracked-animal-after-applying-tripsplit"><i class="fa fa-check"></i><b>15.15.6</b> Review the individual trips for each tracked animal after applying tripSplit()</a></li>
<li class="chapter" data-level="15.15.7" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#plot-the-individual-trips-for-each-tracked-animal-after-applying-tripsplit"><i class="fa fa-check"></i><b>15.15.7</b> Plot the individual trips for each tracked animal after applying tripSplit()</a></li>
</ul></li>
<li class="chapter" data-level="15.16" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kba-what-trip-data-to-use-complete-or-incomplete-trips"><i class="fa fa-check"></i><b>15.16</b> track2kba: What trip data to use (complete or incomplete trips)</a>
<ul>
<li class="chapter" data-level="15.16.1" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kba-choice-of-complete-trips-only"><i class="fa fa-check"></i><b>15.16.1</b> track2KBA: Choice of complete trips only</a></li>
</ul></li>
<li class="chapter" data-level="15.17" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kba-use-only-at-sea-sections-of-trips"><i class="fa fa-check"></i><b>15.17</b> track2KBA: Use only at-sea sections of trips</a></li>
<li class="chapter" data-level="15.18" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kba-number-of-locations-filter"><i class="fa fa-check"></i><b>15.18</b> track2KBA: Number of locations filter</a></li>
<li class="chapter" data-level="15.19" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kba-tripsummary"><i class="fa fa-check"></i><b>15.19</b> track2KBA: tripSummary()</a>
<ul>
<li class="chapter" data-level="15.19.1" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#trip-summary-data-review"><i class="fa fa-check"></i><b>15.19.1</b> Trip summary data review</a></li>
</ul></li>
<li class="chapter" data-level="15.20" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kba-sampling-interval-assessment"><i class="fa fa-check"></i><b>15.20</b> track2KBA: Sampling interval assessment</a>
<ul>
<li class="chapter" data-level="15.20.1" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#sampling-interval-review"><i class="fa fa-check"></i><b>15.20.1</b> Sampling interval review</a></li>
</ul></li>
<li class="chapter" data-level="15.21" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#track2kba-interpolating-data-for-analysis"><i class="fa fa-check"></i><b>15.21</b> track2KBA: Interpolating data for analysis</a>
<ul>
<li class="chapter" data-level="15.21.1" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#interpolating-data-using-only-at-sea-locations"><i class="fa fa-check"></i><b>15.21.1</b> Interpolating data: using only at-sea locations</a></li>
<li class="chapter" data-level="15.21.2" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#interpolating-data-choice-of-sampling-interval"><i class="fa fa-check"></i><b>15.21.2</b> Interpolating data: choice of sampling interval</a></li>
<li class="chapter" data-level="15.21.3" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#interpolating-data-linear-interpolation-implementation"><i class="fa fa-check"></i><b>15.21.3</b> Interpolating data: linear interpolation implementation</a></li>
</ul></li>
<li class="chapter" data-level="15.22" data-path="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html"><a href="track2kba---central-place-foragers-clean-and-summarise-data-for-analysis.html#save-data"><i class="fa fa-check"></i><b>15.22</b> Save data</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html"><i class="fa fa-check"></i><b>16</b> Track2KBA - Central Place Foragers: Analyse cleanded data</a>
<ul>
<li class="chapter" data-level="16.1" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#what-this-chapter-covers-6"><i class="fa fa-check"></i><b>16.1</b> What this chapter covers:</a></li>
<li class="chapter" data-level="16.2" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#where-you-can-get-example-data-for-the-chapter-4"><i class="fa fa-check"></i><b>16.2</b> Where you can get example data for the chapter:</a></li>
<li class="chapter" data-level="16.3" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#description-of-data-prefiltering-for-main-track2kba-analysis"><i class="fa fa-check"></i><b>16.3</b> Description of data prefiltering for main track2kba analysis:</a></li>
<li class="chapter" data-level="16.4" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#load-packages-4"><i class="fa fa-check"></i><b>16.4</b> Load packages</a></li>
<li class="chapter" data-level="16.5" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#define-object-names-for-chapter-4"><i class="fa fa-check"></i><b>16.5</b> Define object names for chapter</a></li>
<li class="chapter" data-level="16.6" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#read-in-file-or-file-created-from-previous-chapter"><i class="fa fa-check"></i><b>16.6</b> Read in file (or file created from previous chapter)</a></li>
<li class="chapter" data-level="16.7" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kba-format-data-for-use-1"><i class="fa fa-check"></i><b>16.7</b> track2KBA: format data for use</a>
<ul>
<li class="chapter" data-level="16.7.1" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kbaformatfields-1"><i class="fa fa-check"></i><b>16.7.1</b> track2KBA::formatFields()</a></li>
</ul></li>
<li class="chapter" data-level="16.8" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kba-projecttracks"><i class="fa fa-check"></i><b>16.8</b> track2kba:: projectTracks()</a></li>
<li class="chapter" data-level="16.9" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kba-findscale"><i class="fa fa-check"></i><b>16.9</b> track2kba:: findScale()</a></li>
<li class="chapter" data-level="16.10" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kba-estspaceuse"><i class="fa fa-check"></i><b>16.10</b> track2kba: estSpaceUse()</a></li>
<li class="chapter" data-level="16.11" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kba-mapkde"><i class="fa fa-check"></i><b>16.11</b> track2kba:: mapKDE()</a></li>
<li class="chapter" data-level="16.12" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kba-review-choice-of-smoothing-parameter"><i class="fa fa-check"></i><b>16.12</b> track2kba: review choice of smoothing parameter</a></li>
<li class="chapter" data-level="16.13" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kbarepassess"><i class="fa fa-check"></i><b>16.13</b> track2kba::repAssess()</a></li>
<li class="chapter" data-level="16.14" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kbafindsite"><i class="fa fa-check"></i><b>16.14</b> track2kba::findSite()</a></li>
<li class="chapter" data-level="16.15" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kbamapsite"><i class="fa fa-check"></i><b>16.15</b> track2kba::mapSite()</a></li>
<li class="chapter" data-level="16.16" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kbafindsite-further-understanding"><i class="fa fa-check"></i><b>16.16</b> track2kba::findSite(), further understanding</a></li>
<li class="chapter" data-level="16.17" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kbafindsite-outputs-explained"><i class="fa fa-check"></i><b>16.17</b> track2kba::findSite(), outputs explained</a></li>
<li class="chapter" data-level="16.18" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kba-save-key-outputs"><i class="fa fa-check"></i><b>16.18</b> track2kba: Save key outputs</a></li>
<li class="chapter" data-level="16.19" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#track2kbafindsite-iba-kba-assessment-considerations"><i class="fa fa-check"></i><b>16.19</b> track2kba::findSite(), IBA / KBA assessment considerations</a></li>
<li class="chapter" data-level="16.20" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#iba-assessment-data-preparation"><i class="fa fa-check"></i><b>16.20</b> IBA assessment data preparation</a></li>
<li class="chapter" data-level="16.21" data-path="track2kba---central-place-foragers-analyse-cleanded-data.html"><a href="track2kba---central-place-foragers-analyse-cleanded-data.html#saving-outputs"><i class="fa fa-check"></i><b>16.21</b> SAVING OUTPUTS</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="sites-considerations-for-assessing-sites-against-criteria.html"><a href="sites-considerations-for-assessing-sites-against-criteria.html"><i class="fa fa-check"></i><b>17</b> Sites: Considerations for assessing sites against criteria</a></li>
<li class="chapter" data-level="18" data-path="sites-refining-boundaries.html"><a href="sites-refining-boundaries.html"><i class="fa fa-check"></i><b>18</b> Sites: Refining boundaries</a></li>
<li class="chapter" data-level="19" data-path="sites-assessing-criteria.html"><a href="sites-assessing-criteria.html"><i class="fa fa-check"></i><b>19</b> Sites: Assessing criteria</a></li>
<li class="chapter" data-level="20" data-path="sites-merging-layers.html"><a href="sites-merging-layers.html"><i class="fa fa-check"></i><b>20</b> Sites: Merging layers</a></li>
<li class="chapter" data-level="21" data-path="sites-at-sea-survey-data-and-modelling.html"><a href="sites-at-sea-survey-data-and-modelling.html"><i class="fa fa-check"></i><b>21</b> Sites: At sea survey data and modelling</a></li>
<li class="chapter" data-level="22" data-path="sites-proposing-ibas-and-kbas.html"><a href="sites-proposing-ibas-and-kbas.html"><i class="fa fa-check"></i><b>22</b> Sites: Proposing IBAs and KBAs</a></li>
<li class="chapter" data-level="23" data-path="sites-conservation.html"><a href="sites-conservation.html"><i class="fa fa-check"></i><b>23</b> Sites: Conservation</a></li>
<li class="chapter" data-level="24" data-path="sites-advocacy.html"><a href="sites-advocacy.html"><i class="fa fa-check"></i><b>24</b> Sites: Advocacy</a></li>
<li class="chapter" data-level="25" data-path="appendix-tracking-data-support.html"><a href="appendix-tracking-data-support.html"><i class="fa fa-check"></i><b>25</b> Appendix: Tracking data support</a></li>
<li class="chapter" data-level="26" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html"><i class="fa fa-check"></i><b>26</b> Appendix-Interpolation Methods Compare</a>
<ul>
<li class="chapter" data-level="26.1" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#description-of-data"><i class="fa fa-check"></i><b>26.1</b> Description of data</a></li>
<li class="chapter" data-level="26.2" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#goal-of-chapter"><i class="fa fa-check"></i><b>26.2</b> Goal of chapter:</a></li>
<li class="chapter" data-level="26.3" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#interpolation"><i class="fa fa-check"></i><b>26.3</b> Interpolation</a></li>
<li class="chapter" data-level="26.4" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#load-packages-5"><i class="fa fa-check"></i><b>26.4</b> Load packages</a></li>
<li class="chapter" data-level="26.5" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#input-parameters-for-chapter-tutorial"><i class="fa fa-check"></i><b>26.5</b> Input parameters for chapter tutorial</a></li>
<li class="chapter" data-level="26.6" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#load-input-example-data-and-prepare-for-track2kba-r-package-protocol"><i class="fa fa-check"></i><b>26.6</b> Load input example data and prepare for track2KBA R package protocol</a></li>
<li class="chapter" data-level="26.7" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#interpolation-methods-differences"><i class="fa fa-check"></i><b>26.7</b> Interpolation methods differences</a>
<ul>
<li class="chapter" data-level="26.7.1" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#get-example-data-for-testing"><i class="fa fa-check"></i><b>26.7.1</b> Get example data for testing</a></li>
</ul></li>
<li class="chapter" data-level="26.8" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#speed-filter-linear-interpolation"><i class="fa fa-check"></i><b>26.8</b> Speed filter &amp; linear interpolation</a></li>
<li class="chapter" data-level="26.9" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#plot-speed-filtered-and-linear-interpolation-data"><i class="fa fa-check"></i><b>26.9</b> Plot: speed filtered and linear interpolation data</a></li>
<li class="chapter" data-level="26.10" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#advanced-interpolation"><i class="fa fa-check"></i><b>26.10</b> Advanced interpolation</a></li>
<li class="chapter" data-level="26.11" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#compare-different-interplation-methods"><i class="fa fa-check"></i><b>26.11</b> Compare different interplation methods</a></li>
<li class="chapter" data-level="26.12" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#review-comparison"><i class="fa fa-check"></i><b>26.12</b> Review comparison</a></li>
<li class="chapter" data-level="26.13" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#interpolation-all-data"><i class="fa fa-check"></i><b>26.13</b> Interpolation: all data</a>
<ul>
<li class="chapter" data-level="26.13.1" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#linear-interpolation-all-animals"><i class="fa fa-check"></i><b>26.13.1</b> Linear interpolation: all animals</a></li>
<li class="chapter" data-level="26.13.2" data-path="appendix-interpolation-methods-compare.html"><a href="appendix-interpolation-methods-compare.html#advanced-interpolation-all-animals"><i class="fa fa-check"></i><b>26.13.2</b> Advanced interpolation: all animals</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Marine Megafauna Conservation Toolkit: with a huge seabird bias</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="seaward-extensions-multiple-colonies" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Seaward Extensions: Multiple colonies<a href="seaward-extensions-multiple-colonies.html#seaward-extensions-multiple-colonies" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This analysis was performed in <strong>R version 4.2.2 (2022-10-31 ucrt)</strong><br />
</p>
<p>This document was last updated on <strong>2023-08-23</strong>
<br><br></p>
<p><strong>What does this section cover:</strong></p>
<ul>
<li>Create a seaward extension raster and polygon for multiple colonies of breeding seabirds</li>
</ul>
<p><strong>Input data:</strong>
- csv file containing:</p>
<ul>
<li><p>Seabird breeding colony location (latitude and longitude)</p></li>
<li><p>Abundance estimate for seabird breeding colony</p></li>
<li><p>Global abundance estimate for seabird species</p></li>
<li><p>Estimate of appropriate distance travelled from the colony for behaviour of interest (foraging, or behaviours near to the colony such as rafting, bathing, preening, collecting nesting material). This is usually estimate from tracking data for the species collected at different site. [add guidance on how to find this information]</p></li>
<li><p>IUCN Red List status</p></li>
</ul>
<p><strong>Outputs:</strong></p>
<ul>
<li>A polygon of each site that meets IBA criteria</li>
<li>Metadata needed for the IBA form</li>
</ul>
<!--- In the code chunk below, we specify include = F, so that we will run the chunk but not include the chunk in the final document. We set a global argument in the code chunk of echo = T, so that in later code chunks, the code will be displayed in the RMarkdown document -->
<div id="load-required-r-packages-1" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> <strong>Load required R packages:</strong><a href="seaward-extensions-multiple-colonies.html#load-required-r-packages-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If the packages fail to load, you will need to install them.
If the install script fails, try downloading a new version of R here: <a href="https://cran.rstudio.com/index.html" class="uri">https://cran.rstudio.com/index.html</a>
If that fails try installing Rtools.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="seaward-extensions-multiple-colonies.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#If needed remove the &quot;#&quot; and run the code below to install the packages. This only needs to be done once.</span></span>
<span id="cb28-2"><a href="seaward-extensions-multiple-colonies.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;sf&quot;)</span></span>
<span id="cb28-3"><a href="seaward-extensions-multiple-colonies.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;terra&quot;)</span></span>
<span id="cb28-4"><a href="seaward-extensions-multiple-colonies.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;rnaturalearth&quot;)</span></span>
<span id="cb28-5"><a href="seaward-extensions-multiple-colonies.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;smoothr&quot;)</span></span>
<span id="cb28-6"><a href="seaward-extensions-multiple-colonies.html#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb28-7"><a href="seaward-extensions-multiple-colonies.html#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;stringr&quot;)</span></span>
<span id="cb28-8"><a href="seaward-extensions-multiple-colonies.html#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="seaward-extensions-multiple-colonies.html#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Load the libraries. This needs to done every time R is restarted.</span></span>
<span id="cb28-10"><a href="seaward-extensions-multiple-colonies.html#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)     <span class="co">#for handling spatial points and polygons</span></span>
<span id="cb28-11"><a href="seaward-extensions-multiple-colonies.html#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)  <span class="co">#for handling rasters</span></span>
<span id="cb28-12"><a href="seaward-extensions-multiple-colonies.html#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(smoothr)<span class="co">#for filling holes in polygons</span></span>
<span id="cb28-13"><a href="seaward-extensions-multiple-colonies.html#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)<span class="co"># rnaturalearth package for geographic basemaps</span></span>
<span id="cb28-14"><a href="seaward-extensions-multiple-colonies.html#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co">#for plots and data wrangling</span></span>
<span id="cb28-15"><a href="seaward-extensions-multiple-colonies.html#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr) <span class="co">#for text edits</span></span>
<span id="cb28-16"><a href="seaward-extensions-multiple-colonies.html#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="seaward-extensions-multiple-colonies.html#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="co">#If it shows, the following warning can be ignored:</span></span>
<span id="cb28-18"><a href="seaward-extensions-multiple-colonies.html#cb28-18" aria-hidden="true" tabindex="-1"></a><span class="co">#The legacy packages maptools, rgdal, and rgeos, underpinning this package</span></span>
<span id="cb28-19"><a href="seaward-extensions-multiple-colonies.html#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="co">#will retire shortly. Please refer to R-spatial evolution reports on</span></span>
<span id="cb28-20"><a href="seaward-extensions-multiple-colonies.html#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="co">#https://r-spatial.org/r/2023/05/15/evolution4.html for details.</span></span>
<span id="cb28-21"><a href="seaward-extensions-multiple-colonies.html#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="co">#This package is now running under evolution status 0 </span></span>
<span id="cb28-22"><a href="seaward-extensions-multiple-colonies.html#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="co">#Support for Spatial objects (`sp`) will be deprecated in {rnaturalearth} and will be removed in a future release of the package. Please use `sf` objects with #{rnaturalearth}. For example: `ne_download(returnclass = &#39;sf&#39;)`</span></span></code></pre></div>
</div>
<div id="supply-input-data-1" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> <strong>Supply input data</strong><a href="seaward-extensions-multiple-colonies.html#supply-input-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This script imports a polygon of the land directly into R using the rnaturaleath package. This resolution is generally suitable, but if you want to use a different basemap (e.g. high resolution and/or a particular projection), go to appendix # and this script will give an example.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="seaward-extensions-multiple-colonies.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Colony data: location, abundance estimate</span></span>
<span id="cb29-2"><a href="seaward-extensions-multiple-colonies.html#cb29-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(wd,<span class="st">&quot;/data-input-files-bookdown/AdeliePenguin_example_dataset_62.csv&quot;</span>))</span>
<span id="cb29-3"><a href="seaward-extensions-multiple-colonies.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div>
<pre><code>##         colony_name colony_size colony_size_min colony_size_max latitude
## 1      Acuna Island        3079            1880            3079 -60.7612
## 2        Ambush Bay       17621           17621           17621 -63.1840
## 3 Amphibolite Point        7660            5000            7660 -60.6840
## 4     Ardley Island         260             260            1331 -62.2130
## 5     Beagle Island      284535           96892          284535 -63.4139
## 6       Cape Bowles         395              60             395 -61.3160
##   longitude
## 1  -44.6370
## 2  -55.3930
## 3  -45.3390
## 4  -58.9330
## 5  -54.6675
## 6  -54.0910</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="seaward-extensions-multiple-colonies.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#[add guidance, bp?]</span></span>
<span id="cb31-2"><a href="seaward-extensions-multiple-colonies.html#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="seaward-extensions-multiple-colonies.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Global population size (this is not the real value, just used for the example!)</span></span>
<span id="cb31-4"><a href="seaward-extensions-multiple-colonies.html#cb31-4" aria-hidden="true" tabindex="-1"></a>min_global_estimate <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb31-5"><a href="seaward-extensions-multiple-colonies.html#cb31-5" aria-hidden="true" tabindex="-1"></a>max_global_estimate <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb31-6"><a href="seaward-extensions-multiple-colonies.html#cb31-6" aria-hidden="true" tabindex="-1"></a>best_global_estimate <span class="ot">&lt;-</span> <span class="dv">10000000</span> <span class="co">#this can be the mean of min &amp; max if another best estimate is not available using the code below:</span></span>
<span id="cb31-7"><a href="seaward-extensions-multiple-colonies.html#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co">#best_global_estimate &lt;- mean(c(min_global_estimate,max_global_estimate))</span></span>
<span id="cb31-8"><a href="seaward-extensions-multiple-colonies.html#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="seaward-extensions-multiple-colonies.html#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co">#where can partner&#39;s get the global estimate?</span></span>
<span id="cb31-10"><a href="seaward-extensions-multiple-colonies.html#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># - we can get data through BirdLife if not available on the red list</span></span>
<span id="cb31-11"><a href="seaward-extensions-multiple-colonies.html#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="co">#make sure it is mature individuals - not breeding pairs!</span></span>
<span id="cb31-12"><a href="seaward-extensions-multiple-colonies.html#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co">#first place to look is red list</span></span>
<span id="cb31-13"><a href="seaward-extensions-multiple-colonies.html#cb31-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-14"><a href="seaward-extensions-multiple-colonies.html#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Red List category to know for IBA &amp; KBA criteria</span></span>
<span id="cb31-15"><a href="seaward-extensions-multiple-colonies.html#cb31-15" aria-hidden="true" tabindex="-1"></a>red_list_category <span class="ot">&lt;-</span> <span class="st">&quot;LC&quot;</span></span>
<span id="cb31-16"><a href="seaward-extensions-multiple-colonies.html#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co">#LC = Least Concern, NT = Near Threatened, VU = Vulnerable, </span></span>
<span id="cb31-17"><a href="seaward-extensions-multiple-colonies.html#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="co">#EN = Endangered, CR = Critically Endangered</span></span>
<span id="cb31-18"><a href="seaward-extensions-multiple-colonies.html#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="co">#DD = Deficient (only uses number based thresholds, not %)</span></span>
<span id="cb31-19"><a href="seaward-extensions-multiple-colonies.html#cb31-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-20"><a href="seaward-extensions-multiple-colonies.html#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="co">#if they are globally threatened, only need 20 mature individuals</span></span>
<span id="cb31-21"><a href="seaward-extensions-multiple-colonies.html#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="co">#For KBAs, also can assess more criteria</span></span>
<span id="cb31-22"><a href="seaward-extensions-multiple-colonies.html#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="co">#red_list_codes &lt;- c(&quot;A2ace&quot;,&quot;3bce&quot;,&quot;4ace&quot;)</span></span>
<span id="cb31-23"><a href="seaward-extensions-multiple-colonies.html#cb31-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-24"><a href="seaward-extensions-multiple-colonies.html#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="co">#[add some images for how to get this from iucnredlist.org]</span></span>
<span id="cb31-25"><a href="seaward-extensions-multiple-colonies.html#cb31-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-26"><a href="seaward-extensions-multiple-colonies.html#cb31-26" aria-hidden="true" tabindex="-1"></a><span class="do">## Maximum colony radius distance (m)</span></span>
<span id="cb31-27"><a href="seaward-extensions-multiple-colonies.html#cb31-27" aria-hidden="true" tabindex="-1"></a>max_colony_radius <span class="ot">&lt;-</span> <span class="dv">149000</span></span>
<span id="cb31-28"><a href="seaward-extensions-multiple-colonies.html#cb31-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-29"><a href="seaward-extensions-multiple-colonies.html#cb31-29" aria-hidden="true" tabindex="-1"></a><span class="do">## Specified resolution of grid cell (m)</span></span>
<span id="cb31-30"><a href="seaward-extensions-multiple-colonies.html#cb31-30" aria-hidden="true" tabindex="-1"></a>grid_res <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb31-31"><a href="seaward-extensions-multiple-colonies.html#cb31-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-32"><a href="seaward-extensions-multiple-colonies.html#cb31-32" aria-hidden="true" tabindex="-1"></a><span class="co">#[For Marine Toolkit, need to provide guidance on choice of resolution. 5km aligned with same scale as the #Critchley et al. 2018 paper, changed to 1km as failed during the example because the birds could cross diagonally through land]</span></span>
<span id="cb31-33"><a href="seaward-extensions-multiple-colonies.html#cb31-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-34"><a href="seaward-extensions-multiple-colonies.html#cb31-34" aria-hidden="true" tabindex="-1"></a><span class="do">## Land polygon</span></span>
<span id="cb31-35"><a href="seaward-extensions-multiple-colonies.html#cb31-35" aria-hidden="true" tabindex="-1"></a><span class="co">#Include the name of the country you wish to import a map for</span></span>
<span id="cb31-36"><a href="seaward-extensions-multiple-colonies.html#cb31-36" aria-hidden="true" tabindex="-1"></a><span class="co">#To include multiple countries use for example &quot;country = c(&quot;Antarctica&quot;,&quot;Chile&quot;)&quot;</span></span>
<span id="cb31-37"><a href="seaward-extensions-multiple-colonies.html#cb31-37" aria-hidden="true" tabindex="-1"></a>land <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">&quot;large&quot;</span>, <span class="at">returnclass =</span> <span class="st">&quot;sf&quot;</span>,</span>
<span id="cb31-38"><a href="seaward-extensions-multiple-colonies.html#cb31-38" aria-hidden="true" tabindex="-1"></a>                     <span class="at">country =</span> <span class="st">&quot;Antarctica&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">st_make_valid</span>()</span></code></pre></div>
</div>
<div id="format-colony-locations-as-spatial-objects" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> <strong>Format colony locations as spatial objects</strong><a href="seaward-extensions-multiple-colonies.html#format-colony-locations-as-spatial-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If the colony locations are not projected into an equal areas crs with metres (m) as the unit, this will need to be done before calculating the distance.
[add link to page on projections]</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="seaward-extensions-multiple-colonies.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#The script requires the spatial data to be projected into an equal areas projection with meters (m) as a unit</span></span>
<span id="cb32-2"><a href="seaward-extensions-multiple-colonies.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">#To do this, we create a custom projection centered around the data</span></span>
<span id="cb32-3"><a href="seaward-extensions-multiple-colonies.html#cb32-3" aria-hidden="true" tabindex="-1"></a>basemap <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(land, <span class="at">crs =</span> <span class="fu">paste0</span>(<span class="st">&quot;+proj=laea +x_0=0 +y_0=0 +lon_0=&quot;</span>,<span class="fu">mean</span>(df<span class="sc">$</span>longitude),</span>
<span id="cb32-4"><a href="seaward-extensions-multiple-colonies.html#cb32-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">&quot; +lat_0=&quot;</span>,<span class="fu">mean</span>(df<span class="sc">$</span>latitude)))</span>
<span id="cb32-5"><a href="seaward-extensions-multiple-colonies.html#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="seaward-extensions-multiple-colonies.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## null device 
##           1</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="seaward-extensions-multiple-colonies.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(basemap[<span class="dv">1</span>], <span class="at">main =</span> <span class="st">&quot;Basemap&quot;</span>)</span>
<span id="cb34-2"><a href="seaward-extensions-multiple-colonies.html#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="seaward-extensions-multiple-colonies.html#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Set coordinate reference system (CRS) for colony locations (example for lat/lon, WGS84)</span></span>
<span id="cb34-4"><a href="seaward-extensions-multiple-colonies.html#cb34-4" aria-hidden="true" tabindex="-1"></a>col_locs <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(df,<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;longitude&quot;</span>,<span class="st">&quot;latitude&quot;</span>), <span class="at">crs =</span> <span class="dv">4326</span>) </span>
<span id="cb34-5"><a href="seaward-extensions-multiple-colonies.html#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="seaward-extensions-multiple-colonies.html#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Make sure colony data is projected to the basemap crs </span></span>
<span id="cb34-7"><a href="seaward-extensions-multiple-colonies.html#cb34-7" aria-hidden="true" tabindex="-1"></a>col_locs_proj <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(col_locs, <span class="at">crs =</span> <span class="fu">st_crs</span>(basemap))</span></code></pre></div>
</div>
<div id="create-a-background-raster-1" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> <strong>Create a background raster</strong><a href="seaward-extensions-multiple-colonies.html#create-a-background-raster-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Create a raster (grid) that can be used for delineation of a seaward extension boundary from a colony of breeding seabirds. This raster will:
- Have a specified cell size (resolution).
- Cover the location of the colony or colonies with a buffer greater than the maximum radius distance.
- Specify cells at either marine or terrestrial (ice can be classified as terrestrial).</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="seaward-extensions-multiple-colonies.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#First set a buffer (m) around the colony/colonies + the resolution of the grid to make sure the grid is large enough. </span></span>
<span id="cb35-2"><a href="seaward-extensions-multiple-colonies.html#cb35-2" aria-hidden="true" tabindex="-1"></a>raster_buffer <span class="ot">&lt;-</span> max_colony_radius <span class="sc">+</span> grid_res</span>
<span id="cb35-3"><a href="seaward-extensions-multiple-colonies.html#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="seaward-extensions-multiple-colonies.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Find the extent of the colony locations</span></span>
<span id="cb35-5"><a href="seaward-extensions-multiple-colonies.html#cb35-5" aria-hidden="true" tabindex="-1"></a>bounds <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(col_locs_proj)</span>
<span id="cb35-6"><a href="seaward-extensions-multiple-colonies.html#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="seaward-extensions-multiple-colonies.html#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Create the blank raster grid with the crs of the land polygon</span></span>
<span id="cb35-8"><a href="seaward-extensions-multiple-colonies.html#cb35-8" aria-hidden="true" tabindex="-1"></a>ras <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(<span class="at">xmin =</span> bounds[[<span class="dv">1</span>]] <span class="sc">-</span> raster_buffer, </span>
<span id="cb35-9"><a href="seaward-extensions-multiple-colonies.html#cb35-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ymin =</span> bounds[[<span class="dv">2</span>]] <span class="sc">-</span> raster_buffer, </span>
<span id="cb35-10"><a href="seaward-extensions-multiple-colonies.html#cb35-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">xmax =</span> bounds[[<span class="dv">3</span>]] <span class="sc">+</span> raster_buffer, </span>
<span id="cb35-11"><a href="seaward-extensions-multiple-colonies.html#cb35-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ymax =</span> bounds[[<span class="dv">4</span>]] <span class="sc">+</span> raster_buffer, </span>
<span id="cb35-12"><a href="seaward-extensions-multiple-colonies.html#cb35-12" aria-hidden="true" tabindex="-1"></a>                   <span class="at">resolution =</span> grid_res,</span>
<span id="cb35-13"><a href="seaward-extensions-multiple-colonies.html#cb35-13" aria-hidden="true" tabindex="-1"></a>                   <span class="at">crs =</span> <span class="fu">st_crs</span>(basemap)<span class="sc">$</span>wkt)</span>
<span id="cb35-14"><a href="seaward-extensions-multiple-colonies.html#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="seaward-extensions-multiple-colonies.html#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert the basemap, currently in polygon format, to a raster and then overlay with the blank raster</span></span>
<span id="cb35-16"><a href="seaward-extensions-multiple-colonies.html#cb35-16" aria-hidden="true" tabindex="-1"></a>basemap_vector <span class="ot">&lt;-</span> <span class="fu">vect</span>(basemap)</span>
<span id="cb35-17"><a href="seaward-extensions-multiple-colonies.html#cb35-17" aria-hidden="true" tabindex="-1"></a>mask <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rasterize</span>(basemap_vector, ras)</span>
<span id="cb35-18"><a href="seaward-extensions-multiple-colonies.html#cb35-18" aria-hidden="true" tabindex="-1"></a>mask[<span class="fu">is.na</span>(mask)] <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb35-19"><a href="seaward-extensions-multiple-colonies.html#cb35-19" aria-hidden="true" tabindex="-1"></a>mask[mask <span class="sc">==</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb35-20"><a href="seaward-extensions-multiple-colonies.html#cb35-20" aria-hidden="true" tabindex="-1"></a>mask[mask <span class="sc">==</span> <span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb35-21"><a href="seaward-extensions-multiple-colonies.html#cb35-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-22"><a href="seaward-extensions-multiple-colonies.html#cb35-22" aria-hidden="true" tabindex="-1"></a>ras <span class="ot">&lt;-</span> mask</span>
<span id="cb35-23"><a href="seaward-extensions-multiple-colonies.html#cb35-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-24"><a href="seaward-extensions-multiple-colonies.html#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## null device 
##           1</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="seaward-extensions-multiple-colonies.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ras)</span></code></pre></div>
</div>
<div id="calculate-distance-by-sea-from-the-colony-per-cell-1" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> <strong>Calculate distance by sea from the colony per cell</strong><a href="seaward-extensions-multiple-colonies.html#calculate-distance-by-sea-from-the-colony-per-cell-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Calculate distances from the colony to each cell travelling only through marine cells, because the birds are expect to travel around land masses rather than over them to reach marine destinations.</li>
<li>For each raster, the script will provide a note to say whether the calculation is successful and advice on what to do if it is not.
[add info about the distance calc successful messages]</li>
</ul>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="seaward-extensions-multiple-colonies.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create a loop to apply the same method to each colony</span></span>
<span id="cb38-2"><a href="seaward-extensions-multiple-colonies.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df))){</span>
<span id="cb38-3"><a href="seaward-extensions-multiple-colonies.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-4"><a href="seaward-extensions-multiple-colonies.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  colony <span class="ot">&lt;-</span> <span class="fu">subset</span>(col_locs_proj,colony_name <span class="sc">==</span> df<span class="sc">$</span>colony_name[i]);colony</span>
<span id="cb38-5"><a href="seaward-extensions-multiple-colonies.html#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="seaward-extensions-multiple-colonies.html#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Extract the cell location of the colony</span></span>
<span id="cb38-7"><a href="seaward-extensions-multiple-colonies.html#cb38-7" aria-hidden="true" tabindex="-1"></a>  pp <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">extract</span>(ras,<span class="fu">vect</span>(colony), <span class="at">cells=</span><span class="cn">TRUE</span>) </span>
<span id="cb38-8"><a href="seaward-extensions-multiple-colonies.html#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="seaward-extensions-multiple-colonies.html#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="do">## convert that cell to a value of 2</span></span>
<span id="cb38-10"><a href="seaward-extensions-multiple-colonies.html#cb38-10" aria-hidden="true" tabindex="-1"></a>  colony_ras <span class="ot">&lt;-</span> ras</span>
<span id="cb38-11"><a href="seaward-extensions-multiple-colonies.html#cb38-11" aria-hidden="true" tabindex="-1"></a>  colony_ras[pp<span class="sc">$</span>cell] <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb38-12"><a href="seaward-extensions-multiple-colonies.html#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="seaward-extensions-multiple-colonies.html#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## You now have a raster with colony cell = 2, land cells = NA and sea cells = 1</span></span>
<span id="cb38-14"><a href="seaward-extensions-multiple-colonies.html#cb38-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-15"><a href="seaward-extensions-multiple-colonies.html#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Calculate distance from colony via sea, cell values of NA are avoided while determining distance</span></span>
<span id="cb38-16"><a href="seaward-extensions-multiple-colonies.html#cb38-16" aria-hidden="true" tabindex="-1"></a>  DistSea <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">gridDist</span>(<span class="at">x=</span>colony_ras,  <span class="co"># x specifies which raster to use</span></span>
<span id="cb38-17"><a href="seaward-extensions-multiple-colonies.html#cb38-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">target=</span><span class="dv">2</span>)      <span class="co"># specifies which cell to determine distance from distance</span></span>
<span id="cb38-18"><a href="seaward-extensions-multiple-colonies.html#cb38-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-19"><a href="seaward-extensions-multiple-colonies.html#cb38-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Add the minimum grid resolution</span></span>
<span id="cb38-20"><a href="seaward-extensions-multiple-colonies.html#cb38-20" aria-hidden="true" tabindex="-1"></a>DistSea <span class="ot">&lt;-</span> DistSea <span class="sc">+</span> grid_res</span>
<span id="cb38-21"><a href="seaward-extensions-multiple-colonies.html#cb38-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-22"><a href="seaward-extensions-multiple-colonies.html#cb38-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Add colony name to raster</span></span>
<span id="cb38-23"><a href="seaward-extensions-multiple-colonies.html#cb38-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(DistSea) <span class="ot">&lt;-</span> df<span class="sc">$</span>colony_name[i]</span>
<span id="cb38-24"><a href="seaward-extensions-multiple-colonies.html#cb38-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-25"><a href="seaward-extensions-multiple-colonies.html#cb38-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Check calculation is successful</span></span>
<span id="cb38-26"><a href="seaward-extensions-multiple-colonies.html#cb38-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(terra<span class="sc">::</span><span class="fu">minmax</span>(DistSea)[<span class="dv">2</span>] <span class="sc">==</span> <span class="dv">0</span>) <span class="fu">print</span>(<span class="st">&quot;WARNING: Check for NAs in final output. Your origin(colony) may be to far in land. </span></span>
<span id="cb38-27"><a href="seaward-extensions-multiple-colonies.html#cb38-27" aria-hidden="true" tabindex="-1"></a><span class="st">                                                  Therefore, your origin is completely buffered by omit cells (land cells), </span></span>
<span id="cb38-28"><a href="seaward-extensions-multiple-colonies.html#cb38-28" aria-hidden="true" tabindex="-1"></a><span class="st">                                                  and no distance calculation for cells at sea can be performed&quot;</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="fu">paste</span>(i,</span>
<span id="cb38-29"><a href="seaward-extensions-multiple-colonies.html#cb38-29" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">&quot;Distance calculation successful&quot;</span>))</span>
<span id="cb38-30"><a href="seaward-extensions-multiple-colonies.html#cb38-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-31"><a href="seaward-extensions-multiple-colonies.html#cb38-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-32"><a href="seaward-extensions-multiple-colonies.html#cb38-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Save rasters </span></span>
<span id="cb38-33"><a href="seaward-extensions-multiple-colonies.html#cb38-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb38-34"><a href="seaward-extensions-multiple-colonies.html#cb38-34" aria-hidden="true" tabindex="-1"></a>      ColonyStack <span class="ot">&lt;-</span> DistSea</span>
<span id="cb38-35"><a href="seaward-extensions-multiple-colonies.html#cb38-35" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb38-36"><a href="seaward-extensions-multiple-colonies.html#cb38-36" aria-hidden="true" tabindex="-1"></a>     ColonyStack <span class="ot">&lt;-</span> <span class="fu">c</span>(ColonyStack,DistSea)</span>
<span id="cb38-37"><a href="seaward-extensions-multiple-colonies.html#cb38-37" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb38-38"><a href="seaward-extensions-multiple-colonies.html#cb38-38" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1 Distance calculation successful&quot;
## [1] &quot;2 Distance calculation successful&quot;
## [1] &quot;3 Distance calculation successful&quot;
## [1] &quot;4 Distance calculation successful&quot;
## [1] &quot;5 Distance calculation successful&quot;
## [1] &quot;6 Distance calculation successful&quot;
## [1] &quot;7 Distance calculation successful&quot;
## [1] &quot;8 Distance calculation successful&quot;
## [1] &quot;9 Distance calculation successful&quot;
## [1] &quot;10 Distance calculation successful&quot;
## [1] &quot;11 Distance calculation successful&quot;
## [1] &quot;12 Distance calculation successful&quot;
## [1] &quot;13 Distance calculation successful&quot;
## [1] &quot;14 Distance calculation successful&quot;
## [1] &quot;15 Distance calculation successful&quot;
## [1] &quot;16 Distance calculation successful&quot;
## [1] &quot;17 Distance calculation successful&quot;
## [1] &quot;18 Distance calculation successful&quot;
## [1] &quot;19 Distance calculation successful&quot;
## [1] &quot;20 Distance calculation successful&quot;
## [1] &quot;21 Distance calculation successful&quot;
## [1] &quot;22 Distance calculation successful&quot;
## [1] &quot;23 Distance calculation successful&quot;
## [1] &quot;24 Distance calculation successful&quot;
## [1] &quot;25 Distance calculation successful&quot;
## [1] &quot;26 Distance calculation successful&quot;
## [1] &quot;27 Distance calculation successful&quot;
## [1] &quot;28 Distance calculation successful&quot;
## [1] &quot;29 Distance calculation successful&quot;
## [1] &quot;30 Distance calculation successful&quot;
## [1] &quot;31 Distance calculation successful&quot;
## [1] &quot;32 Distance calculation successful&quot;
## [1] &quot;33 Distance calculation successful&quot;
## [1] &quot;34 Distance calculation successful&quot;
## [1] &quot;35 Distance calculation successful&quot;
## [1] &quot;36 Distance calculation successful&quot;
## [1] &quot;37 Distance calculation successful&quot;
## [1] &quot;38 Distance calculation successful&quot;
## [1] &quot;39 Distance calculation successful&quot;
## [1] &quot;40 Distance calculation successful&quot;
## [1] &quot;41 Distance calculation successful&quot;
## [1] &quot;42 Distance calculation successful&quot;
## [1] &quot;43 Distance calculation successful&quot;
## [1] &quot;44 Distance calculation successful&quot;
## [1] &quot;45 Distance calculation successful&quot;
## [1] &quot;46 Distance calculation successful&quot;
## [1] &quot;47 Distance calculation successful&quot;
## [1] &quot;48 Distance calculation successful&quot;
## [1] &quot;49 Distance calculation successful&quot;
## [1] &quot;50 Distance calculation successful&quot;
## [1] &quot;51 Distance calculation successful&quot;
## [1] &quot;52 Distance calculation successful&quot;
## [1] &quot;53 Distance calculation successful&quot;
## [1] &quot;54 Distance calculation successful&quot;
## [1] &quot;55 Distance calculation successful&quot;
## [1] &quot;56 Distance calculation successful&quot;
## [1] &quot;57 Distance calculation successful&quot;
## [1] &quot;58 Distance calculation successful&quot;
## [1] &quot;59 Distance calculation successful&quot;
## [1] &quot;60 Distance calculation successful&quot;
## [1] &quot;61 Distance calculation successful&quot;
## [1] &quot;62 Distance calculation successful&quot;</code></pre>
</div>
<div id="inspect-the-output-distance-from-colony-rasters" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> <strong>Inspect the output distance from colony rasters</strong><a href="seaward-extensions-multiple-colonies.html#inspect-the-output-distance-from-colony-rasters" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Look at the object and plot examples</li>
</ul>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="seaward-extensions-multiple-colonies.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Output is a stack of rasters containing a layer for each colony</span></span>
<span id="cb40-2"><a href="seaward-extensions-multiple-colonies.html#cb40-2" aria-hidden="true" tabindex="-1"></a>ColonyStack</span></code></pre></div>
<pre><code>## class       : SpatRaster 
## dimensions  : 640, 1075, 62  (nrow, ncol, nlyr)
## resolution  : 1000, 1000  (x, y)
## extent      : -467720.8558, 607279.1442, -329322.1032, 310677.8968  (xmin, xmax, ymin, ymax)
## coord. ref. : +proj=laea +lat_0=-62.2587353064516 +lon_0=-52.8170365645161 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs 
## source(s)   : memory
## names       : Acuna Island,  Ambush Bay, Amphi~Point, Ardle~sland, Beagl~sland, Cape Bowles, ... 
## min values  :     1000.000,   1000.0000,    1000.000,    1000.000,   1000.0000,   1000.0000, ... 
## max values  :  1130910.822, 909312.8419, 1099295.598, 1060033.621, 882253.9674, 855354.4725, ...</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="seaward-extensions-multiple-colonies.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="fu">nlyr</span>(ColonyStack),<span class="st">&quot;raster layers&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;62 raster layers&quot;</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="seaward-extensions-multiple-colonies.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">#To plot a particular raster use the index number</span></span>
<span id="cb44-2"><a href="seaward-extensions-multiple-colonies.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ColonyStack[[<span class="dv">1</span>]], <span class="at">main =</span> df<span class="sc">$</span>colony_name[<span class="dv">1</span>]) </span>
<span id="cb44-3"><a href="seaward-extensions-multiple-colonies.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ColonyStack[[<span class="dv">2</span>]], <span class="at">main =</span> df<span class="sc">$</span>colony_name[<span class="dv">2</span>]) </span>
<span id="cb44-4"><a href="seaward-extensions-multiple-colonies.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ColonyStack[[<span class="dv">3</span>]], <span class="at">main =</span> df<span class="sc">$</span>colony_name[<span class="dv">3</span>]) </span>
<span id="cb44-5"><a href="seaward-extensions-multiple-colonies.html#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ColonyStack[[<span class="dv">4</span>]], <span class="at">main =</span> df<span class="sc">$</span>colony_name[<span class="dv">4</span>]) </span></code></pre></div>
<p><img src="_main_files/figure-html/swe3-plot-calc-dist-1.png" width="50%" /><img src="_main_files/figure-html/swe3-plot-calc-dist-2.png" width="50%" /><img src="_main_files/figure-html/swe3-plot-calc-dist-3.png" width="50%" /><img src="_main_files/figure-html/swe3-plot-calc-dist-4.png" width="50%" /></p>
</div>
<div id="for-each-colony-estimate-number-of-birds-that-use-each-cell" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> <strong>For each colony, estimate number of birds that use each cell</strong><a href="seaward-extensions-multiple-colonies.html#for-each-colony-estimate-number-of-birds-that-use-each-cell" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Set any cells that are further that the provided maximum distance from the colony to NA</li>
<li>Normalise to 0 and 1 probability of occurrence instead of distance using a log decay function</li>
<li>Multiply by colony size</li>
<li>Save ouputs to another raster stack</li>
<li>Plot examples</li>
</ul>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="seaward-extensions-multiple-colonies.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Loop through colonies</span></span>
<span id="cb45-2"><a href="seaward-extensions-multiple-colonies.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df)){</span>
<span id="cb45-3"><a href="seaward-extensions-multiple-colonies.html#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="seaward-extensions-multiple-colonies.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  DistSea <span class="ot">&lt;-</span> ColonyStack[[i]]</span>
<span id="cb45-5"><a href="seaward-extensions-multiple-colonies.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-6"><a href="seaward-extensions-multiple-colonies.html#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Set any cell further than maximum distance to NA</span></span>
<span id="cb45-7"><a href="seaward-extensions-multiple-colonies.html#cb45-7" aria-hidden="true" tabindex="-1"></a>  DistSea[DistSea <span class="sc">&gt;</span> max_colony_radius] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb45-8"><a href="seaward-extensions-multiple-colonies.html#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="seaward-extensions-multiple-colonies.html#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Normalise to 0 and 1 probability of occurrence</span></span>
<span id="cb45-10"><a href="seaward-extensions-multiple-colonies.html#cb45-10" aria-hidden="true" tabindex="-1"></a>  ProbOccurence <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">*</span>(DistSea<span class="sc">/</span>max_colony_radius)<span class="sc">+</span><span class="dv">1</span> </span>
<span id="cb45-11"><a href="seaward-extensions-multiple-colonies.html#cb45-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-12"><a href="seaward-extensions-multiple-colonies.html#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Apply logarithmic decay function as done in Critchley et al. 2020. </span></span>
<span id="cb45-13"><a href="seaward-extensions-multiple-colonies.html#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#https://onlinelibrary.wiley.com/doi/full/10.1111/ecog.04653</span></span>
<span id="cb45-14"><a href="seaward-extensions-multiple-colonies.html#cb45-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Skipping this step will result in a linear decay. Other decay functions could be input here if justified.</span></span>
<span id="cb45-15"><a href="seaward-extensions-multiple-colonies.html#cb45-15" aria-hidden="true" tabindex="-1"></a>  ProbOccurenceLog <span class="ot">&lt;-</span> ProbOccurence<span class="sc">*</span>(<span class="dv">1</span><span class="sc">/</span><span class="fu">log</span>(DistSea))</span>
<span id="cb45-16"><a href="seaward-extensions-multiple-colonies.html#cb45-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-17"><a href="seaward-extensions-multiple-colonies.html#cb45-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Rescale to between 0 and 1</span></span>
<span id="cb45-18"><a href="seaward-extensions-multiple-colonies.html#cb45-18" aria-hidden="true" tabindex="-1"></a>  ProbOccurenceLog <span class="ot">&lt;-</span> ProbOccurenceLog<span class="sc">/</span></span>
<span id="cb45-19"><a href="seaward-extensions-multiple-colonies.html#cb45-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">max</span>(<span class="fu">values</span>(ProbOccurenceLog), <span class="at">na.rm =</span>T)</span>
<span id="cb45-20"><a href="seaward-extensions-multiple-colonies.html#cb45-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-21"><a href="seaward-extensions-multiple-colonies.html#cb45-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Multiply by population size</span></span>
<span id="cb45-22"><a href="seaward-extensions-multiple-colonies.html#cb45-22" aria-hidden="true" tabindex="-1"></a>  PopRaster <span class="ot">&lt;-</span> ProbOccurenceLog<span class="sc">*</span>df<span class="sc">$</span>colony_size[i]</span>
<span id="cb45-23"><a href="seaward-extensions-multiple-colonies.html#cb45-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-24"><a href="seaward-extensions-multiple-colonies.html#cb45-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Add colony name to raster</span></span>
<span id="cb45-25"><a href="seaward-extensions-multiple-colonies.html#cb45-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(PopRaster) <span class="ot">&lt;-</span> df<span class="sc">$</span>colony_name[i]</span>
<span id="cb45-26"><a href="seaward-extensions-multiple-colonies.html#cb45-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb45-27"><a href="seaward-extensions-multiple-colonies.html#cb45-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Save rasters </span></span>
<span id="cb45-28"><a href="seaward-extensions-multiple-colonies.html#cb45-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">==</span> <span class="dv">1</span>){</span>
<span id="cb45-29"><a href="seaward-extensions-multiple-colonies.html#cb45-29" aria-hidden="true" tabindex="-1"></a>      ColonyStack_pop <span class="ot">&lt;-</span> PopRaster</span>
<span id="cb45-30"><a href="seaward-extensions-multiple-colonies.html#cb45-30" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb45-31"><a href="seaward-extensions-multiple-colonies.html#cb45-31" aria-hidden="true" tabindex="-1"></a>     ColonyStack_pop <span class="ot">&lt;-</span> <span class="fu">c</span>(ColonyStack_pop,PopRaster)</span>
<span id="cb45-32"><a href="seaward-extensions-multiple-colonies.html#cb45-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb45-33"><a href="seaward-extensions-multiple-colonies.html#cb45-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-34"><a href="seaward-extensions-multiple-colonies.html#cb45-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-35"><a href="seaward-extensions-multiple-colonies.html#cb45-35" aria-hidden="true" tabindex="-1"></a><span class="co">#To plot a particular raster use the index number</span></span>
<span id="cb45-36"><a href="seaward-extensions-multiple-colonies.html#cb45-36" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ColonyStack_pop[[<span class="dv">1</span>]], <span class="at">main =</span> df<span class="sc">$</span>colony_name[<span class="dv">1</span>]) </span>
<span id="cb45-37"><a href="seaward-extensions-multiple-colonies.html#cb45-37" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ColonyStack_pop[[<span class="dv">2</span>]], <span class="at">main =</span> df<span class="sc">$</span>colony_name[<span class="dv">2</span>]) </span>
<span id="cb45-38"><a href="seaward-extensions-multiple-colonies.html#cb45-38" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ColonyStack_pop[[<span class="dv">3</span>]], <span class="at">main =</span> df<span class="sc">$</span>colony_name[<span class="dv">3</span>]) </span>
<span id="cb45-39"><a href="seaward-extensions-multiple-colonies.html#cb45-39" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ColonyStack_pop[[<span class="dv">4</span>]], <span class="at">main =</span> df<span class="sc">$</span>colony_name[<span class="dv">4</span>]) </span></code></pre></div>
<p><img src="_main_files/figure-html/swe3-dist-to-pop-1.png" width="50%" /><img src="_main_files/figure-html/swe3-dist-to-pop-2.png" width="50%" /><img src="_main_files/figure-html/swe3-dist-to-pop-3.png" width="50%" /><img src="_main_files/figure-html/swe3-dist-to-pop-4.png" width="50%" /></p>
</div>
<div id="overlap-the-rasters-and-save-raster-outputs" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> <strong>Overlap the rasters and save raster outputs</strong><a href="seaward-extensions-multiple-colonies.html#overlap-the-rasters-and-save-raster-outputs" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>If rasters from multiple colonies overlap, you can combine the rasters</li>
<li>This means that if two nearby colonies don’t trigger IBA criteria individually, they may do in the areas they overlap</li>
</ul>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="seaward-extensions-multiple-colonies.html#cb46-1" aria-hidden="true" tabindex="-1"></a>all_sites_raster <span class="ot">&lt;-</span> <span class="fu">sum</span>(ColonyStack_pop, <span class="at">na.rm =</span> T)</span>
<span id="cb46-2"><a href="seaward-extensions-multiple-colonies.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(all_sites_raster)</span></code></pre></div>
<p><img src="_main_files/figure-html/swe3-raster-ovelap-1.png" width="672" /></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="seaward-extensions-multiple-colonies.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create a folder to contain the outputs</span></span>
<span id="cb47-2"><a href="seaward-extensions-multiple-colonies.html#cb47-2" aria-hidden="true" tabindex="-1"></a>outputs <span class="ot">&lt;-</span> <span class="st">&quot;/seaward_extension_outputs&quot;</span></span>
<span id="cb47-3"><a href="seaward-extensions-multiple-colonies.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="fu">paste0</span>(wd,outputs))</span>
<span id="cb47-4"><a href="seaward-extensions-multiple-colonies.html#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="seaward-extensions-multiple-colonies.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">#save</span></span>
<span id="cb47-6"><a href="seaward-extensions-multiple-colonies.html#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co">#terra::writeRaster(all_sites_raster,paste0(wd,outputs,&quot;/seaward-ext-multi-col-dist.tif&quot;), overwrite=T)</span></span></code></pre></div>
</div>
<div id="calculate-iba-raster-1" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> <strong>Calculate IBA raster</strong><a href="seaward-extensions-multiple-colonies.html#calculate-iba-raster-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>If the species is not Threatened (Red List category of Least Concern, Near Threatened or Vulnerable), filter out cells containing less than 1% of the global population</li>
</ul>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="seaward-extensions-multiple-colonies.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#turn abundance raster to dataframe. use IBA criteria function</span></span>
<span id="cb48-2"><a href="seaward-extensions-multiple-colonies.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co">#test each iba criteria cell by cell, record whether meets each critirea (only global)</span></span>
<span id="cb48-3"><a href="seaward-extensions-multiple-colonies.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="seaward-extensions-multiple-colonies.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Waterbird or seabird?</span></span>
<span id="cb48-5"><a href="seaward-extensions-multiple-colonies.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Can we use lists from datazone</span></span>
<span id="cb48-6"><a href="seaward-extensions-multiple-colonies.html#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Jono will follow up with Ian B</span></span>
<span id="cb48-7"><a href="seaward-extensions-multiple-colonies.html#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="seaward-extensions-multiple-colonies.html#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Sometimes we need to know what red list criteria was applied to applu IBA/KBA sub criteria.</span></span>
<span id="cb48-9"><a href="seaward-extensions-multiple-colonies.html#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co">#We can&#39;t share the BL database with this info.</span></span>
<span id="cb48-10"><a href="seaward-extensions-multiple-colonies.html#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="co">#red list api R</span></span>
<span id="cb48-11"><a href="seaward-extensions-multiple-colonies.html#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="seaward-extensions-multiple-colonies.html#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="co">#stored:</span></span>
<span id="cb48-13"><a href="seaward-extensions-multiple-colonies.html#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Science (W:) &gt; 2 Species data &gt; 2022 Red List datasets &gt; 2022-12 &gt; BL_Population_2022-12</span></span>
<span id="cb48-14"><a href="seaward-extensions-multiple-colonies.html#cb48-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-15"><a href="seaward-extensions-multiple-colonies.html#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(red_list_category <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;LC&quot;</span>,<span class="st">&quot;NT&quot;</span>,<span class="st">&quot;VU&quot;</span>)){</span>
<span id="cb48-16"><a href="seaward-extensions-multiple-colonies.html#cb48-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-17"><a href="seaward-extensions-multiple-colonies.html#cb48-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Convert to with more (1) or less (0) than 1% of global population </span></span>
<span id="cb48-18"><a href="seaward-extensions-multiple-colonies.html#cb48-18" aria-hidden="true" tabindex="-1"></a>  IBA_raster <span class="ot">&lt;-</span> all_sites_raster</span>
<span id="cb48-19"><a href="seaward-extensions-multiple-colonies.html#cb48-19" aria-hidden="true" tabindex="-1"></a>  IBA_raster[IBA_raster <span class="sc">&lt;</span> best_global_estimate<span class="sc">/</span><span class="dv">100</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb48-20"><a href="seaward-extensions-multiple-colonies.html#cb48-20" aria-hidden="true" tabindex="-1"></a>  IBA_raster[IBA_raster <span class="sc">&gt;=</span> best_global_estimate<span class="sc">/</span><span class="dv">100</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb48-21"><a href="seaward-extensions-multiple-colonies.html#cb48-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-22"><a href="seaward-extensions-multiple-colonies.html#cb48-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">#plot to check</span></span>
<span id="cb48-23"><a href="seaward-extensions-multiple-colonies.html#cb48-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(IBA_raster) </span>
<span id="cb48-24"><a href="seaward-extensions-multiple-colonies.html#cb48-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-25"><a href="seaward-extensions-multiple-colonies.html#cb48-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">#set to NA cells </span></span>
<span id="cb48-26"><a href="seaward-extensions-multiple-colonies.html#cb48-26" aria-hidden="true" tabindex="-1"></a>  IBA_raster[IBA_raster <span class="sc">==</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb48-27"><a href="seaward-extensions-multiple-colonies.html#cb48-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-28"><a href="seaward-extensions-multiple-colonies.html#cb48-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-29"><a href="seaward-extensions-multiple-colonies.html#cb48-29" aria-hidden="true" tabindex="-1"></a><span class="co">#There are other IBA and KBA criteria, you can look these up, but we are not able to include codes to assess all criteria in this toolkit.</span></span></code></pre></div>
<p><img src="_main_files/figure-html/swe3-iba-rasters-1.png" width="50%" /></p>
</div>
<div id="calculate-iba-polygon-1" class="section level2 hasAnchor" number="4.10">
<h2><span class="header-section-number">4.10</span> <strong>Calculate IBA polygon</strong><a href="seaward-extensions-multiple-colonies.html#calculate-iba-polygon-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Convert to polygon format</li>
<li>Simplify the polygon to a more usable shape</li>
<li>Fill in small holes between the land and simplified polygon</li>
<li>Cut out the area covered by land</li>
<li>Save the output</li>
</ol>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="seaward-extensions-multiple-colonies.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">#convert raster to a polygon format</span></span>
<span id="cb49-2"><a href="seaward-extensions-multiple-colonies.html#cb49-2" aria-hidden="true" tabindex="-1"></a>IBA_poly_ras <span class="ot">&lt;-</span> IBA_raster <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="seaward-extensions-multiple-colonies.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  terra<span class="sc">::</span><span class="fu">as.polygons</span>() <span class="sc">%&gt;%</span></span>
<span id="cb49-4"><a href="seaward-extensions-multiple-colonies.html#cb49-4" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_as_sf</span>()</span>
<span id="cb49-5"><a href="seaward-extensions-multiple-colonies.html#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="seaward-extensions-multiple-colonies.html#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="co">#simplify the polygon</span></span>
<span id="cb49-7"><a href="seaward-extensions-multiple-colonies.html#cb49-7" aria-hidden="true" tabindex="-1"></a>IBA_poly <span class="ot">&lt;-</span> IBA_poly_ras <span class="sc">%&gt;%</span></span>
<span id="cb49-8"><a href="seaward-extensions-multiple-colonies.html#cb49-8" aria-hidden="true" tabindex="-1"></a>  sf<span class="sc">::</span><span class="fu">st_simplify</span>(<span class="at">dTolerance =</span> <span class="dv">2</span><span class="sc">*</span><span class="fu">res</span>(IBA_raster)[<span class="dv">1</span>]) </span>
<span id="cb49-9"><a href="seaward-extensions-multiple-colonies.html#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="seaward-extensions-multiple-colonies.html#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="do">##Make buffer to crop to local part of basemap  </span></span>
<span id="cb49-11"><a href="seaward-extensions-multiple-colonies.html#cb49-11" aria-hidden="true" tabindex="-1"></a>max_dist_buffer <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(col_locs_proj, <span class="at">dist =</span> max_colony_radius)</span>
<span id="cb49-12"><a href="seaward-extensions-multiple-colonies.html#cb49-12" aria-hidden="true" tabindex="-1"></a>land <span class="ot">&lt;-</span> basemap <span class="sc">%&gt;%</span> </span>
<span id="cb49-13"><a href="seaward-extensions-multiple-colonies.html#cb49-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_crop</span>(<span class="fu">st_bbox</span>(max_dist_buffer)) <span class="sc">%&gt;%</span></span>
<span id="cb49-14"><a href="seaward-extensions-multiple-colonies.html#cb49-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_union</span>()</span>
<span id="cb49-15"><a href="seaward-extensions-multiple-colonies.html#cb49-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-16"><a href="seaward-extensions-multiple-colonies.html#cb49-16" aria-hidden="true" tabindex="-1"></a><span class="co">#fill in holes in the polygon, and holes between the coatline and the polygon,</span></span>
<span id="cb49-17"><a href="seaward-extensions-multiple-colonies.html#cb49-17" aria-hidden="true" tabindex="-1"></a><span class="co">#then trim out the areas covered by land</span></span>
<span id="cb49-18"><a href="seaward-extensions-multiple-colonies.html#cb49-18" aria-hidden="true" tabindex="-1"></a>IBA_poly_trim <span class="ot">&lt;-</span> smoothr<span class="sc">::</span><span class="fu">fill_holes</span>(IBA_poly, <span class="at">threshold =</span> <span class="fu">st_area</span>(IBA_poly)) <span class="sc">%&gt;%</span> </span>
<span id="cb49-19"><a href="seaward-extensions-multiple-colonies.html#cb49-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_union</span>(.,land) <span class="sc">%&gt;%</span></span>
<span id="cb49-20"><a href="seaward-extensions-multiple-colonies.html#cb49-20" aria-hidden="true" tabindex="-1"></a>  smoothr<span class="sc">::</span><span class="fu">fill_holes</span>(<span class="at">threshold =</span> <span class="fu">st_area</span>(IBA_poly)) <span class="sc">%&gt;%</span>  </span>
<span id="cb49-21"><a href="seaward-extensions-multiple-colonies.html#cb49-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_difference</span>(land)</span>
<span id="cb49-22"><a href="seaward-extensions-multiple-colonies.html#cb49-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-23"><a href="seaward-extensions-multiple-colonies.html#cb49-23" aria-hidden="true" tabindex="-1"></a><span class="co">#plot the result</span></span>
<span id="cb49-24"><a href="seaward-extensions-multiple-colonies.html#cb49-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(IBA_poly_trim)<span class="sc">+</span></span>
<span id="cb49-25"><a href="seaward-extensions-multiple-colonies.html#cb49-25" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_sf</span>(<span class="at">data =</span> IBA_poly_ras, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb49-26"><a href="seaward-extensions-multiple-colonies.html#cb49-26" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_sf</span>(<span class="at">data =</span> land, <span class="at">fill =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">colour =</span> <span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb49-27"><a href="seaward-extensions-multiple-colonies.html#cb49-27" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_sf</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/swe3-poly-1.png" width="672" /></p>
</div>
<div id="split-into-separate-iba-polygons-and-save-metadata" class="section level2 hasAnchor" number="4.11">
<h2><span class="header-section-number">4.11</span> <strong>Split into separate IBA polygons and save metadata</strong><a href="seaward-extensions-multiple-colonies.html#split-into-separate-iba-polygons-and-save-metadata" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>#next task is to split the mulitpolygon into 2 separate polygons</p>
<p>then for each polygon,</p>
<p>min, max</p>
<p>polys_df &lt;-</p>
<p>create column for each criteria and polygon ID number</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="seaward-extensions-multiple-colonies.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Split multipolygon into separate polygons</span></span>
<span id="cb50-2"><a href="seaward-extensions-multiple-colonies.html#cb50-2" aria-hidden="true" tabindex="-1"></a>polys <span class="ot">&lt;-</span> <span class="fu">st_cast</span>(IBA_poly_trim, <span class="at">to =</span> <span class="st">&quot;POLYGON&quot;</span>) <span class="co">#Warning message is ok</span></span>
<span id="cb50-3"><a href="seaward-extensions-multiple-colonies.html#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="seaward-extensions-multiple-colonies.html#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Many polygons?</span></span>
<span id="cb50-5"><a href="seaward-extensions-multiple-colonies.html#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(polys) <span class="co">#2</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="seaward-extensions-multiple-colonies.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#for(i in 1:nrow(polys)){</span></span>
<span id="cb52-2"><a href="seaward-extensions-multiple-colonies.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-3"><a href="seaward-extensions-multiple-colonies.html#cb52-3" aria-hidden="true" tabindex="-1"></a> <span class="co"># IBA_poly_single &lt;- polys[i,]</span></span>
<span id="cb52-4"><a href="seaward-extensions-multiple-colonies.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  plot(IBA_poly_single)</span></span>
<span id="cb52-5"><a href="seaward-extensions-multiple-colonies.html#cb52-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-6"><a href="seaward-extensions-multiple-colonies.html#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#abudance_raster_IBA &lt;- terra::mask(all_sites_raster, IBA_poly_ras_single) </span></span>
<span id="cb52-7"><a href="seaward-extensions-multiple-colonies.html#cb52-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-8"><a href="seaward-extensions-multiple-colonies.html#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#polys_df$min_abundance[i] &lt;- round(min(values(abudance_raster_IBA),na.rm = T))</span></span>
<span id="cb52-9"><a href="seaward-extensions-multiple-colonies.html#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#polys_df$max_abundance[i] &lt;- round(max(values(abudance_raster_IBA),na.rm = T))</span></span>
<span id="cb52-10"><a href="seaward-extensions-multiple-colonies.html#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="seaward-extensions-multiple-colonies.html#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#record all the criteria met (unique in each cells)</span></span>
<span id="cb52-12"><a href="seaward-extensions-multiple-colonies.html#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#then 1 row of data per polgyons</span></span>
<span id="cb52-13"><a href="seaward-extensions-multiple-colonies.html#cb52-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-14"><a href="seaward-extensions-multiple-colonies.html#cb52-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#subspecies can be used a regional IBA criteria</span></span>
<span id="cb52-15"><a href="seaward-extensions-multiple-colonies.html#cb52-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Olivia&#39;s current scripts don&#39;t use regional pop est. criteria</span></span>
<span id="cb52-16"><a href="seaward-extensions-multiple-colonies.html#cb52-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Add text to say that we aren&#39;t considering regional criteria, but they do exist</span></span>
<span id="cb52-17"><a href="seaward-extensions-multiple-colonies.html#cb52-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-18"><a href="seaward-extensions-multiple-colonies.html#cb52-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">#area</span></span>
<span id="cb52-19"><a href="seaward-extensions-multiple-colonies.html#cb52-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">#centroid</span></span>
<span id="cb52-20"><a href="seaward-extensions-multiple-colonies.html#cb52-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">#species</span></span>
<span id="cb52-21"><a href="seaward-extensions-multiple-colonies.html#cb52-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-22"><a href="seaward-extensions-multiple-colonies.html#cb52-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-23"><a href="seaward-extensions-multiple-colonies.html#cb52-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">#numbers are not in a good order</span></span>
<span id="cb52-24"><a href="seaward-extensions-multiple-colonies.html#cb52-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">#would be good to order north to south or clockwise, or left to right</span></span>
<span id="cb52-25"><a href="seaward-extensions-multiple-colonies.html#cb52-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-26"><a href="seaward-extensions-multiple-colonies.html#cb52-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">#add the polygon number to the plot</span></span>
<span id="cb52-27"><a href="seaward-extensions-multiple-colonies.html#cb52-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-28"><a href="seaward-extensions-multiple-colonies.html#cb52-28" aria-hidden="true" tabindex="-1"></a><span class="co">#}</span></span></code></pre></div>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="seaward-extensions-multiple-colonies.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">#plot the final polygon with foraging radius approach</span></span>
<span id="cb53-2"><a href="seaward-extensions-multiple-colonies.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#colony &lt;- subset(col_locs_proj,colony_name == df$colony_name[i]);colony</span></span>
<span id="cb53-3"><a href="seaward-extensions-multiple-colonies.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">#max_dist_buffer &lt;- st_buffer(col_locs_proj, dist = max_colony_radius) %&gt;%</span></span>
<span id="cb53-4"><a href="seaward-extensions-multiple-colonies.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">#    st_union()</span></span>
<span id="cb53-5"><a href="seaward-extensions-multiple-colonies.html#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="seaward-extensions-multiple-colonies.html#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="co">#plot the result</span></span>
<span id="cb53-7"><a href="seaward-extensions-multiple-colonies.html#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co">#ggplot(IBA_poly_trim)+</span></span>
<span id="cb53-8"><a href="seaward-extensions-multiple-colonies.html#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  geom_sf(data = land, fill = &quot;grey&quot;, colour = NA)+</span></span>
<span id="cb53-9"><a href="seaward-extensions-multiple-colonies.html#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_sf(fill = &quot;#fcba0350&quot;, color = &quot;red&quot;) </span></span>
<span id="cb53-10"><a href="seaward-extensions-multiple-colonies.html#cb53-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-11"><a href="seaward-extensions-multiple-colonies.html#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="co">#ggplot(max_dist_buffer)+</span></span>
<span id="cb53-12"><a href="seaward-extensions-multiple-colonies.html#cb53-12" aria-hidden="true" tabindex="-1"></a><span class="co">#  geom_sf(fill = NA, col = &quot;blue&quot;)+</span></span>
<span id="cb53-13"><a href="seaward-extensions-multiple-colonies.html#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="co">#  geom_sf(data = IBA_poly_trim, fill = &quot;#fcba0350&quot;, col = &quot;red&quot;)+</span></span>
<span id="cb53-14"><a href="seaward-extensions-multiple-colonies.html#cb53-14" aria-hidden="true" tabindex="-1"></a><span class="co">#  geom_sf(data = land, fill = &quot;grey&quot;, color = NA) +</span></span>
<span id="cb53-15"><a href="seaward-extensions-multiple-colonies.html#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="co">#  ggtitle(&quot;All colonies&quot;)</span></span>
<span id="cb53-16"><a href="seaward-extensions-multiple-colonies.html#cb53-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-17"><a href="seaward-extensions-multiple-colonies.html#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="co">#add metadata to the polygon before saving</span></span>
<span id="cb53-18"><a href="seaward-extensions-multiple-colonies.html#cb53-18" aria-hidden="true" tabindex="-1"></a><span class="co">#add metadata to the plot</span></span>
<span id="cb53-19"><a href="seaward-extensions-multiple-colonies.html#cb53-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-20"><a href="seaward-extensions-multiple-colonies.html#cb53-20" aria-hidden="true" tabindex="-1"></a><span class="co">#if different cells meet different criteria, we can draw a polygon around the entire area</span></span>
<span id="cb53-21"><a href="seaward-extensions-multiple-colonies.html#cb53-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-22"><a href="seaward-extensions-multiple-colonies.html#cb53-22" aria-hidden="true" tabindex="-1"></a><span class="co">#Jono removed polygons that are less than 1 cell large - but for this we will not drop any polygons - instead add guidance that they should. </span></span>
<span id="cb53-23"><a href="seaward-extensions-multiple-colonies.html#cb53-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-24"><a href="seaward-extensions-multiple-colonies.html#cb53-24" aria-hidden="true" tabindex="-1"></a><span class="co">#site_name &lt;- &quot;Spindrift Rocks Seaward Extension&quot;</span></span>
<span id="cb53-25"><a href="seaward-extensions-multiple-colonies.html#cb53-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-26"><a href="seaward-extensions-multiple-colonies.html#cb53-26" aria-hidden="true" tabindex="-1"></a><span class="co">#plot the result</span></span>
<span id="cb53-27"><a href="seaward-extensions-multiple-colonies.html#cb53-27" aria-hidden="true" tabindex="-1"></a><span class="co">#ggplot(IBA_poly_trim)+</span></span>
<span id="cb53-28"><a href="seaward-extensions-multiple-colonies.html#cb53-28" aria-hidden="true" tabindex="-1"></a><span class="co">#  geom_sf(data = land, fill = &quot;grey&quot;, colour = NA)+</span></span>
<span id="cb53-29"><a href="seaward-extensions-multiple-colonies.html#cb53-29" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_sf(fill = &quot;#fcba0350&quot;, color = &quot;red&quot;) +</span></span>
<span id="cb53-30"><a href="seaward-extensions-multiple-colonies.html#cb53-30" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggtitle(site_name)</span></span>
<span id="cb53-31"><a href="seaward-extensions-multiple-colonies.html#cb53-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-32"><a href="seaward-extensions-multiple-colonies.html#cb53-32" aria-hidden="true" tabindex="-1"></a><span class="co">#save the polygon</span></span>
<span id="cb53-33"><a href="seaward-extensions-multiple-colonies.html#cb53-33" aria-hidden="true" tabindex="-1"></a><span class="co">#st_write(IBA_poly_trim, paste0(getwd(),&quot;\\outputs\\IBA_polygon&quot;,gsub(&quot; #&quot;,&quot;_&quot;,site_name),&quot;.shp&quot;))</span></span></code></pre></div>
</div>
<div id="record-the-metadata-1" class="section level2 hasAnchor" number="4.12">
<h2><span class="header-section-number">4.12</span> Record the metadata<a href="seaward-extensions-multiple-colonies.html#record-the-metadata-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This is needed for the submission of the site in the WBDB.
Many variables have already been input or generated by the script so far.
Some need to be calculated:
- Area
- Coordinates of the mid point
- Min/best/max estimate of number of mature individuals in the site (not pairs)</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="seaward-extensions-multiple-colonies.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Calculate the area of the site. </span></span>
<span id="cb54-2"><a href="seaward-extensions-multiple-colonies.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co">#area_km2 &lt;- as.numeric(st_area(IBA_poly_trim)/1000000)</span></span>
<span id="cb54-3"><a href="seaward-extensions-multiple-colonies.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co">#area_hectare &lt;- area_km2*100</span></span>
<span id="cb54-4"><a href="seaward-extensions-multiple-colonies.html#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="seaward-extensions-multiple-colonies.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Calculate the midpoint of the site and record in the different formats</span></span>
<span id="cb54-6"><a href="seaward-extensions-multiple-colonies.html#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co">#midpoint &lt;- st_centroid(IBA_poly_trim) %&gt;%</span></span>
<span id="cb54-7"><a href="seaward-extensions-multiple-colonies.html#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  st_transform(4326) </span></span>
<span id="cb54-8"><a href="seaward-extensions-multiple-colonies.html#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="seaward-extensions-multiple-colonies.html#cb54-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-10"><a href="seaward-extensions-multiple-colonies.html#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="co">#lat_midpoint_decdeg &lt;- midpoint$geometry[[1]][2]</span></span>
<span id="cb54-11"><a href="seaward-extensions-multiple-colonies.html#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="co">#lat_mid_deg &lt;- gsub(&quot;-&quot;,&quot;&quot;,gsub(&quot;\\..*&quot;,&quot;&quot;,lat_midpoint_decdeg)) </span></span>
<span id="cb54-12"><a href="seaward-extensions-multiple-colonies.html#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="co">#lat_mid_decmin &lt;- as.numeric(paste0(&quot;0.&quot;,strsplit(as.character(lat_midpoint_#decdeg), split = &quot;[.]&quot;)[[1]][2]))*60</span></span>
<span id="cb54-13"><a href="seaward-extensions-multiple-colonies.html#cb54-13" aria-hidden="true" tabindex="-1"></a><span class="co">#lat_mid_north_or_south &lt;- ifelse(substr(lat_midpoint_decdeg,1,1) == &quot;-&quot;, #&quot;South&quot;, &quot;North&quot;)</span></span>
<span id="cb54-14"><a href="seaward-extensions-multiple-colonies.html#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="co">#lon_midpoint_decdeg &lt;- midpoint$geometry[[1]][1]</span></span>
<span id="cb54-15"><a href="seaward-extensions-multiple-colonies.html#cb54-15" aria-hidden="true" tabindex="-1"></a><span class="co">#lon_mid_deg &lt;- gsub(&quot;-&quot;,&quot;&quot;,gsub(&quot;\\..*&quot;,&quot;&quot;,lon_midpoint_decdeg)) </span></span>
<span id="cb54-16"><a href="seaward-extensions-multiple-colonies.html#cb54-16" aria-hidden="true" tabindex="-1"></a><span class="co">#lon_mid_decmin &lt;- as.numeric(paste0(&quot;0.&quot;,strsplit(as.character(lon_midpoint_#decdeg), split = &quot;[.]&quot;)[[1]][2]))*60</span></span>
<span id="cb54-17"><a href="seaward-extensions-multiple-colonies.html#cb54-17" aria-hidden="true" tabindex="-1"></a><span class="co">#lon_mid_north_or_south &lt;- ifelse(substr(lat_midpoint_decdeg,1,1) == &quot;-&quot;, #&quot;West&quot;, &quot;East&quot;)</span></span>
<span id="cb54-18"><a href="seaward-extensions-multiple-colonies.html#cb54-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-19"><a href="seaward-extensions-multiple-colonies.html#cb54-19" aria-hidden="true" tabindex="-1"></a><span class="co">#collate the metadat already input or generate in this script</span></span>
<span id="cb54-20"><a href="seaward-extensions-multiple-colonies.html#cb54-20" aria-hidden="true" tabindex="-1"></a><span class="co">#metadata &lt;- as.data.frame(cbind(site_name, area_km2, area_hectare, </span></span>
<span id="cb54-21"><a href="seaward-extensions-multiple-colonies.html#cb54-21" aria-hidden="true" tabindex="-1"></a><span class="co">#                                lat_midpoint_decdeg, lat_mid_deg, #lat_mid_decmin, lat_mid_north_or_south, </span></span>
<span id="cb54-22"><a href="seaward-extensions-multiple-colonies.html#cb54-22" aria-hidden="true" tabindex="-1"></a><span class="co">#                                lon_midpoint_decdeg, lon_mid_deg, #lon_mid_decmin, lon_mid_north_or_south,</span></span>
<span id="cb54-23"><a href="seaward-extensions-multiple-colonies.html#cb54-23" aria-hidden="true" tabindex="-1"></a><span class="co">#                                common_name, scientific_name, colony_size, </span></span>
<span id="cb54-24"><a href="seaward-extensions-multiple-colonies.html#cb54-24" aria-hidden="true" tabindex="-1"></a><span class="co">#                                best_global_estimate, red_list_category, #red_list_criteria))</span></span>
<span id="cb54-25"><a href="seaward-extensions-multiple-colonies.html#cb54-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-26"><a href="seaward-extensions-multiple-colonies.html#cb54-26" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(metadata, paste0(&quot;IBA_metadata_&quot;,gsub(&quot; &quot;,&quot;_&quot;,site_name),&quot;.csv&quot;),</span></span>
<span id="cb54-27"><a href="seaward-extensions-multiple-colonies.html#cb54-27" aria-hidden="true" tabindex="-1"></a><span class="co">#          row.names = F)</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="seaward-extensions-single-colony.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tracking-data-introduction.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
